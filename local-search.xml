<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>启动</title>
    <link href="/2024/11/27/%E5%90%AF%E5%8A%A8/"/>
    <url>/2024/11/27/%E5%90%AF%E5%8A%A8/</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="诶呀，不太对呢！" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="df6753d40f1318b943bd84b5b85eb079c248e7573b9fe923e654ad336bf51f48">2538d295d8c95c40e73de90028ce63391dd3996a66d47654fcaa91760ea2bfc81027e0fde55043450315e023b0572a8878341dd5c3c4c3fee860b8b410abd6ad0317526695f748999aad3ba9b84d13ecf9a159b2056f468a5094f5cd3b9d104e75e3bb67d7385d6131f8a9a22899e9af1a18a53c7038cb904f67c766ff67553f8042a8108f222f53ffc2d94a078a11c293f3029afe8113ea038b3595f1122f252e210993fede5f255abafd03b461f63756e40c576732fd8c979276cc3e1a749184ac8b31c59102eb085980ce34181f3f076898382eb87795bd44a35adebf306e50c623d9b830c84c3054963fb93e24db72d29d719bdfcab45d75e524aa52d24db7c984a09e48e691b0bea75cec41a323a3853df8b66dcc3937c82c40dada93df8dc6429fefa593b086ab271b7a76fd966b3fe3c2d0a86c808409d592ad104ba2d93c7178685e20ed0e88251aabec8af77052b8fd6694255ba68f717f9618914ed6e8643c588761ce852e7e46e1c4e7de794ccaea14fcd4d0d011372b85f2207c0e9a2c9a13c9184b630b6205949f5877824d760a4b3fc2edaea7821d8f7f555d89ad68c326edc64677deea371c863ad82bd6bc537fb31521b1665fac04dcfb26352d80d9683991ee11185901af9d4927b1e3fae225508c3e07bdfc9a4d5aa708fb4fba9f88256f025fc5175467d9bbc9b22ae20a94234bb4826e16405b2ffc5ace40f2b467e4e7fe1f2f64f85dce8470675ac780065807f641d3f351f97da13f0bb0adb3efc7d53abb32dd53f782408c69019b9f0bbe4489e328c8800a925049542aa0e6f1c970c669176df002b15b2961f5e1224f20e16f36d0a913f2598e8d07501088b4ab58735ac3a7f1532a26b2aef99a0faa35214aeaead8795bc26ddfcf0aab33ad2c07fd7c5a222198aa007effa1e24f2c7798f6f39de176552a1cc1d0ab9cc60e26f2f4c93cf213cb0f695b35df082cbd38520a850293b9ae95423a1969ee346d4fa916a7dd0d75657dcd0456f5c8c042a2ae2517212eee031f30d9658c706982d3983c79e3e012de2b55ec3221df0b14ef5b380b7e7783f53d949fa73d41a2997e0689493cb213462ac745c1bfaa432f50b0b1fabe9092d94c4e45b857f10c92d5b60e88ff2c304048d014d81e865a0babdb3442a06fab0864930af52edb19f9ca294f03f2aecb9fdda40432954ceafba3f94acd37082c4bb76b604308af57923fddb0982eb520b626272c3c09ef3647ce2326721e351590a9dff99287f65558bdea53a488e95125ba1a00c4a493b6e7feb60bf5bd8e8d3a86a05e7fd9e0a309256850c4787a5ca66a230e6ffbf76afb71cbbcb75ca242e802303f73e0684d4de9d96bea3ef9fb1597f37f4ed84877204f5b575560328098677e49f62c6ed9ceb796ccbd6d290f102a91d721703a725ab1d1a1a5be988110de1c79c1cf37c68a9cf76f5a093ab2f002a1932a0bfad58c2b58012f15bf83e3febd07272b450588f5cc3b8c17f71ad21dc7063f728baf10d0b679e1871274f0fc7307d89f2b8d10a781e0df964c3f10fc27b91bc3e4772159ce98aa3c6a27e26543eb700529e9493cacbbf3080078032100af7157d7efe930785c9615da43bcb77e3f6f28b4c30e6cf45aa734830b86ad3ad63d55024c648ae208c18aca7677681998d94d1a2f85d0f64ddf09a708693bf55624b6a8d7ffbb40847642ca369e9a42dedcc403143de53dfcda1630522ce4eb174c0e8e77112260720e1091d049a48da0d1f47daa86813ee7b7304f29d0ff08da23e21a6faca5a1cfc0a985894a7c0e45a71ec1262f544ea53d2ff4c23a63aa0c03fdc5f2c50b37f852a9b2931e547a33753bb20560aef001699b5562462b222c4e9011a7f47188532ec0f404b457261f1238c5e5bd0b5cbbf6cfe2a7e71f0de8aae174ac46ab1a54f06f53409c4df06edab42857f7eed5a0b64e0dcb9e934c5f78d749e8d05f52b279f6c4bc2bbd68f85bbf2f42ffe47732d642b6f79bd52723eabd52d792a5f5241b4373cab07e5dc5effec4f3b2abed59d413fdb7e0319d35f902b5c89301539731ce5c1c45e6d15fa146adfe3f0e546c772e50a24d8846ff0105136bc5b827dae2222bc60f77249cc4c87cde4167e4037dac42019543acd1e87607495e7aeeb5162a2f282dffd2f56c210f44ac3b80e0bb858736d52c4d2489527b9306580e67d3837bd2728e82daa92414b148c5e9df21ff84523211b8bb7123ee1dff4d1a61313fa66ca3468b5720f726a8825f469541f7864041898df8a63f140d841e64bcacd3e2de52c6e3f9ba5d3b6604e80af0a92e24eadb8e1b8a7d171c0f8243973daf12540a8f0ef8e1fafcfa68c3239b148128bdf2189f3bbd42a4215e4eb28b7344de8b32c6b09d065bf2b7e2c686e1484588ab18212bbcd01b4b80c91078ff45efcab21b0a90203412cab34826044f0d5c98c25c561ea3b9533c045b313c39bcb410596e647d7418b0461ce90550b1a9e3d054be1e55a10148fda70ea8a15f8ce6c31a6ebab7dbe9f9ae35f3948618d1ff8d833f5e63021aec4bfb1a6074ca17d3b4ccb7539bca008ccb935700c3297df7494b9098ea0d20f769a7c0c9030c83306b94c89d105900ea15304fabbd305fbcb8cb5b93d379fb60cc38810b5fc00a025514e3816615c5d2ede55b192246c63c2d3ef65287e559b4e127c6703faf9a06d93576e78987a393051574c17126eae97f63b4a2442c54d2c1bf6f56d93631e23149938ac1ee26887b388d606a8db59906ac7b85cf7fda5ccafd14480f3bd12feb04b776f440f1299e02306268a2815da23c9b9cc87ee47ed3205bab54d9a7de6390f95c9305c6c6a1e5758a893efbab8dfe81ee5c41e177bca63e146ceedbf8cb56700a0aea8c9d02254cd672789f94079b391a0ebd1a60d5dbaff522aec93130b52e956174a8e02f4f4e808c1548e7659bd5fa375c14f48dfa2784166a331234bef90a0855070506d575eceb9e91fc67c4a7806eac7d20628a4cf6f584df4cd49b9ee89e29443160bb8fa57e6c8deaa8c26607f7c3a7ee0b2dfd226dc39e223dfad762e1f69d90c19516872261bd64892f5be594bc9ca62850b514125034843325dff766d8d628b3085aef5415ff218e1a8d676aef7df2834b3ddc3e51b7c172d95fcc988a570a2c3259ea074ab917c830360a89bb99399e6a88e0fafd9b614895e39d7242f90a6279b1e01c19601251094849941e922e7157899a40714829631fff1da49db0cbebe16ff9a7ddda252d6c268d7736c58db1c7d83055e08496689af31912bfe63b0471d406d3a566e2ea6d4a699261bebd12e87c04cd85cdb5b5708899e3cbd982e66957df407752ae521cc2402b367ecab118575aac4ab59363e60b2d1c85c9e368ff88ffdd5553efa60c2129f5fa828cd3dea8732111ea4a1a56915b263ba79d424ed0e90573b43597f79a4066bec6ebff7ac194eefc624c6a209d02f6195866596c0f86710a97c88736f681ee273aa1f219e3de8bc9489f24e7ec720321c8107c5e82d1a8a16a2acfda512a522d983468ce659f20c7dcf305ece7e10271de5f481c22333b4a475da3f507502bb8a0d8c7505074a8441e70b8d1febff14a944c40d9883cacc5d4f46ab3a4397c67c862e65d7e86d19f54547fe194ddb1951649f26b1f829cbd23129ded806acefd1d25b2690d269e3767e9f0cc69aa3c7a29f9949bdf581c53a5b38ce91607a2863f49fdd39e04429204f4071b9fccb2e9ae67293f2d9633eed770acbba1b45f599019cf50fb47c873c308ddb7507f4977a665937e323644ad74efddee4c34a0b52f7fe2b3d01d8f21af0a5cbaa23638d99345639fd08fc6bf150f62ee66e345231ed14f7b2ba47c1c9e84d33255317683c17cb9ecd2c62734e4adb1403e9edb752e42b0c811b00c9dacd9d63ab5c8b47b98ce3f9c508a479c4904ccc5c0d066b5eb348b8b8fcfc679933dd133c7ad30689c7dec90e8f2a68d952a93a87fdf31ee6eeb95961a0a6b9bd7143aa5708a2b1db1454e9d76fac22b08f7c54bd4f6d5565ba1ba92fac1d50188a7c4f8cd2ea7d1b8af876bf717b60c5b64190966744c8dd0d947b00a689d28e4192cb6b270636428a6947e8045f93f68b116a2da9435f6c3a6ecfceb87dbb43f889ec9902d0fcc23f75b6c1f5b28caa9a2a0d059ed2aed855b42631212dfe9390a1d280ab2ad93db699612c327c6595d51dd63a4c62e144ef975aee2ca718d6f3be7623836e2afa4cea9ee95319c10cd264801c3fbe41129d5b768baa5df51f71eb79fd7b469a00744f3258ea4083560ee78ac5498b078546a5af65b2908114c0fbcff16495a7e5316225320c21080fed147015b930cdcb8cd302ce52146c56149635fe9cb9539326010e399a780792ee3727ec777906a97587203bc80746f8576bda2ee9e7ad48e05600e6f9520de4c352e889331a82c399be4df049b7a88342264131ed33138b4251fb3a45d7b589b6a8718473b1535aa76c0918ec8b5ffdc531092daf0e1ac4c7f95ef46fde9003967b0cace7bc5be53ef0e99ff537f073cbb2482607595f5f4bcb068edc45392ed68dfce56dde9e93398c2346f261a1ea7df1efb1cbba422ec6838a1b6a68784075e758328c90dec722a203e45ea42a7fd67b47b80ac87c1b9d2c722f6cc05c68bf82d95c01d67e16920d98cc37242f32e078c218dfc945b06636c905f6bc3500c75788eeb89de8cee739ea6d48eaf5bc75551e84c4682c0320c97129e2d68b905d5af71184011fde2b50f7a73e15b1ee96b34853810d96f9e01f1483824e0f300217e3ed459e4b7053b8a0f695cf687b54411bff52e5eefb5c680034ba144493f086e0540c53d793b2ef04cd8da8affeeb7438b826f254865ffaebe57d817f85221d512bb4d9f6927d76a6dfa9b7a1c45f1beffedef909cc44ddeb6b6add831f5d2f44601215552b04bcb93b71a1ae4695468332cee1915313f2d4b8b83d041cfdb4743a9df7c45795e105aae11af46bf1ea2e3327279163d6612ef986f112c22c9dc4e19f5ed742fe9ce05d2c00e321d543477e9c45c7c0eb01e27abb928d63102631f88f8499da887d83c9d9cc11893b9cf9132706525dd333c91e518142d4b7195bafae06a48b7aca8fe7b71a4112383bb74d04ae8a59d747e70673e93bb50b28354905453729a94fb2eef97be5fb84b138531d87a1b03dd956e18c92c3bf181810569dcd280e86a55884156d551a2681e48f9ce318aa3db7f10281f69232fa74d2f584e06272504a9d8fc25717f9148e5235fb84dbe7cde24680ff469c3f642b9dbaf2cd7f33b3af5dfcef6fa90a776a9a2869e1bcfbc766d14753d76c3be71c8013ea7ad0dbb2af026e900e85c9776c0a2e4170f375a6468923b78e99d61e808c6a72d07955780fb2e1348dcc932a7247584ea04fd3c4420bffc9124100b571d6c23e368ec4325077f70771c45fcf6179b99192446cc9b2cff5cc19ee25a6c75a85c065d83bf7c8b8649aec0ced14f55e41e2fdcc1c24ccf4527d2daa762f7e78c925147260b012b2f375aa30df395bbecb3f13f80a779d29fd0b278738bf118b9f265f7d4f6ef9d1fc80caa9b6e7dcd509023b2c809a05eae3fbf57b09a7377c8a16d51c61bbf0dd25d3f7b5f43b8146b2e30745efe5d46392699464acd873370e96e4038f97d0b79c6d8b0e1c2a538e977efed41a6e32a64959ad94fe868ae5a4c902ccd5596e24ccf78f459a756adf7a083b4fb03eecb37ab1a1e069fd9011c3c3e0277b53fb17e1959406382dac013ca737361d8c47d7734d18c751d3a4c55592396ab1431cc8ba43497f8f3123ce75937b3beb7d94a23f3d039838c00ac35832878ffc92c996a968c461e362c81e5f3ece0bd819a2b7f48b75b5259d5d58689590c8e16c01a06cefa1879b18779e2bdd1e9aed326f9ee6c202624278cc13630e949e0f4f468cc4bf40732f01bacadbc310602ce023bbe7817c68bd9c270c506415fdf4a1d974fbfe56600d08e101bb0a1e165d4f7d8ad9ed6866a9fd47a77b5f653b374ae6f21affeb16382e4c58a96049ca8f5ab121e9684de32c4db78af186a8a67ba36fe0d84018e48079a08dabf076c155bbc3bbeb55038cbec8ffe0ce1f264656d3baf40371fc94c512a55a8b27cc1d70c3b4b105ea9f0a71aee14ae526954c8bc980d0d5f6104135c10cabc2707bbb58f408018ccd4f2beefa5003ba567a3305764b336667a9df2521108eabbda5a954311602d4c11965a3dae20eb44702ea5237bfe664af667a39bc89438bb5fd309d4cfaf334a578a6e24e4beb661133c17b8b18b184fc18037af68a18a94b92903afca4a4d9f8847255a66472b001ae5488b2ddb074301672ead040162abf67ab702fc5b952be97e6adbbce1665b96b1573db91fb241df16501b07094d846201020b202c8ed61f7330aae6002113798911169a9eda0fe1f6f51f6eea8d02b3e38f2bf23aaab7ad84c7e47afcd937c946e6e6b464903df3559dd3f348ef6c2e7e839e1ea14af5f0f78b4ffec12d982cf56859276671ac889886ec2e8984d11fd44ab48bbb54084702d14bc1e475c07ef4f6e1e8db0236886b8ce5e0e320ac15b4e0dcf73af3a6c5ff3c7cd53d93d9e4cd62c0273e3ce845a1533b36d5306644e15ac5d1ea2951e259526b7895dab8da7546070ee44352218cfe64071840f148697f045a67445ad552e8625dae7cd2ee3c352f0d2d073e97f737216dd71971467cee969f898c9f17de58726a16c591b40458f7d84c9bf6d8a550165e57154a9af3f2c437d46ec44811fcda348028d791b196d0982106720f1c953b2b73b5b23ca63f33000e53d4b2801b62b6e5bca52bce84480ef1e759a4b1c7e61646a2f51a6ced967a4041a8b4539416e875c0bb4d390a611b3ed59d368c8e501fc71dd57e893b14f91a0223490c5fcb499fe924a6fc22c712c2d23976fa7eff5c02e709cc05c963f8245fcbaabd648b6030ab018aef21f7d8eadd4b5bcfe72249a446325344093b58f820c4e5bfd7675e5c9f602fca3568a064ceda3f365fd39abb00c1202306769a0426837656ea15cf7402fc0e1b1416f4b11a44b77dbaee1c8be041f8cf68dbd379d8f841d5e54ce3d379be1e2822bc5dbf60e3a523d0112480c1ccfc47084597a12167ebbd65eabbe1e5f41ba16f379f034e356fec6958fce63cbb1f4e7b68710b1ed816af0434c1a227717762cfdff60ca54127436bf80047201caccf608315135fe2595717298b50bf407e0556892187b09d7e699e47c3cbd110125e4a016ee6c69a83835111eb23c075ac31b99f12d835a6b88e1e211fdc988c7708709c042764ed4782e2e95d4246177590ddb8337b8c7559dcbb70bc07ef0234357fe4a5b99a7555b3718c9720f7166dff2eccf49539c9c4978b36e8770ac1a771a9738a8ac019fbc2b88b218368339ad2db3ead6ac2ca72a5439cfa933b17ca0e00c51b316fb31a54aa014cffd20e2d889316ef31dc69af241f09e5edb04da52b902dbbea35d432a3511b1b049ed85a00a9114186880656e7a1058f99158a69938f6116abf70d02d9c42d3d95bddf73716587ed0f82e8ed303c27efe0520909117be1f1105c9f703061e2bda0a4c285c3fc09c5aaf2f3f04ec9f87e6dbbfdb8ff74b838788c018e5eadbedd7e8275d4ff84142695bb144f737c6a9b5ce38f3337904fbae53e277f20e59254a6c7440c569bd05a0122fdc9eaef0c7f8bae8c60715256a33c5876ad1f34f0a80f9f0d23bcc6be900637bc94bb372c303669bfa79cd08177e7529b390d5e507540ec5f4847c63736af0a0381151e8ab694a121315a27650bc0215bf5c62e7d1fd214422fe63817e007595f24a731fa5750ba28995ead391dad878e9a3e5d1310c3a354374d1d6469f723ee66cfe1995c8cdde2ffbf87719438f6a27877a5498f1d056bcf4fc29bc696736d19bfaf89a18c09b5d91eb702388ae0ebeed526cef1970283b49c1937e69725e62d0fe024e3a61ec03a724fb8286525e9e35fbf45bfa1a71cc7c12c76633e7a76706613a96fda673c2dafccc1155a5ffc08d37ccc96aa1cde8e96a00598f0cd295a179b0447c857ee78eb15ed2cc7be766d6e11063e13d7678aae17bf2b89f10efad12841e0f3b6b11258b55044aa885f3d44bf14e8d92a66e8bb8b33099f7a9d200ce0a833aca052cb5454ef</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">猜一猜？</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>6.s081</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Lab1</title>
    <link href="/2024/11/27/pingpong%E6%9C%AA%E8%A7%A3%E4%B9%8B%E8%B0%9C/"/>
    <url>/2024/11/27/pingpong%E6%9C%AA%E8%A7%A3%E4%B9%8B%E8%B0%9C/</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="诶呀，不太对呢！" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="8ddde7babdee8c60c13c01cd023098dc35e1303563e9767b2fddd8d9fb75749d">2538d295d8c95c40e73de90028ce6339f5da288585b44fb182761098886cca00aedba63a89cd0a481a8f9e09d3c69fbc6b3525a2172e82bb2e08d58a7c1d99061c21ca2dc4a6816ed3851dfd949c8ab9c43839f02e38cb10b400a789a7285be77a320a7bc71814d5e67427cbe82fddaf593917b9697e0617afbe61217aac4742b3921566254130dae62312552729240372636368fdfe020aec7f8623d1ab0b6e962ce336867926461f7859dec0fc5a499d7f0f74be3c3f66cc93715e90c694008e785daa5fa669c7cdabfb8104b61fd5f43f21c9ee098309fca0c789dda0e4b86a1c54917da7e7fc63eb50df935484cadb500c6d16ec89e17aec670c0b08ade0f039738ee27f1b278dd5e1420bede134c51d71923fa7632d12fb72e2b258c01af3caeec85670526167112c3ddf53e9e81feb9837a6702b1397cde5da746e602f99df80881b6db6e7648c9999065a5c3800b0db9877f845938fc0d25df3649b2ee180c33f554ceae2c465b3847dd32b6f5e689a027438a6b0031a2045ac64871eb09d45b1334f72db86a8f8496ae6ade32619660b38202c67c33b6be346762f2710672f1af1fe8d2b4b615f342816d4c0d38aad799aaffa6004fc7bd01347332edfdb313d7d7531f9cfc195c9b5fadc3558a2f6fca281feea88f147e2fbab4047e27b256e60d4f67284df59efb99af0510bc7b6ecbe5357de074120020f714f66771e546db59a1a6d377ddaf85ea9874a9cf66ff373d7e1d6588def64c2b9bc39923e79052ed82b03766f934221d44cfb784c09400dbae2c987c573d61b6ae8404b5193be0edfdf321ecf452fb5efe88af3eec8e54e223ca8eca76efd2dc1b4ecd64084b9a6c968923b40cc8928b94c9f6424665dc54442abd45ebb6a769eac642604c43789a84ba33494ac4062ca17568a7dab1450e1c4a908b6584aacf21bf4286785fdfcebcbe833cf0ff9cc4524b75184dd4e78e96fa3468eb8d77299e936700feabde99c3b582e89196588bc2d9c5747dbe78f564ce142cec1425ac2570c01e6ad6e0d26b4c5c7e5c5bd2ddc036a2e2cea730bd2e4e6ecc2f818fcf0bbf95d8957a00f65c627705ce4482ba1a384f0fce7adc9d80b1d99bb8c9c6f51771b43f8eda9271685be1f0755eb1e7e4e7d19ab4eaad27f0ebfc3b3dfe5757d50cf4e1fc2898cf6de8abacdd28656e6c248efa58bb18f2095a8cf9ed004564238489eae45f03e02d18ec17d6b3b946293aee31ce620c6c14f01f79582d4b162ccd3aad92c32d01088c3a72e2a9bc80471fcce8c15ad4a106f1247d4994e121a1a3ca590f37d009fa5c83de26a0dd79a8b365bcbd86cfcbf918bd5fd27863d45cc6611a327f81d1fd0770e93f9fd8a2023973fc9037de3474ef5ca128131d6bc9f11363eca7217de717b1ce2809d9376c463dbd622ddc8868c2a2cfcaa91def734035aa26b2bd4ffeb85f123b5809139458359d8803334fe69562783bb34039d60602d1074284e0da752e07701e1a557012626e46966a7e8cf245c3818a9757d86a4498bf57c16611e0300be6848b83530a85dc99525fb963869116aa6d023c8c3457348ea1d222ab365d9327eb8c83543bb47d74f2b8ad920b2c0c360a052286cc9577f6d5d69f48ea1e0179320f785314f4e39105c5b205c085d8d9f7eb766af5153ee66c5042c04b73ae42394c9df08551ffdb49605d490315c005acb616ecfaed8a2bd6eec64c34c0d848ac27f5481512a24c3ffc410e91dfe08f97086ab9a10da850f47ecad52bbc725d1de222c5295acae58cd7806c9d7b83308ad04d514a366375f6d3763c7c976a24d16230c7fa200b1512172e49370f6cc4467f7d877e2132f2816e652a00c6ea7368fb6116337f257dfa34567f84e8b3508a9c5f480bdb51101ca06bb924923f6fb8e3f989de834d917f68a218ba6a9d7c953b589d55ba20404b03b421c97877135e6aca81ce5326d45fd8634f0234156f596710dc26a1692b7a3bd053a0ff157375a7f6c19e154a1bbab79e1a12711fc8c17f3ac3d4d42ed2603c89be5d398efdb0372cb463409371df1108b01748ef8cc1d922c620e7797c641ab5b3e3362ccc6785040b9ddd8db3c8ff4cf276c3fe7565fca28fb345f4759dc96ca36c917156383dde822698358b36f1345662fd71f5d59497bc5f9edcce0ea7b3075f722e8d3411b7248d1c05a4e812ec0298efc846aad9232dfb31f5ba800b793ae9fe533cb992a7fbd76c9e559bce2120a9a7b710b67b1d29b5b1e6b29ee1e4758509a9511f5f95eca085e3943e8761fd59a05294598a63b022302a045859cc9c25deac83696d6e47849fbe3236b0e47a3ff2f4fe2ace2c73cf342e34a36fd624ffb30dedcb0d4c13ed32777f08e15aab351066ddcd941249c0d90526c43f380e7157ed6c87d2b947642ec9aaa2a845bf7e762275af6a191bca2b28f972f9337fc2a7b040ba9c99e3582f8f3342b904463b8a06ccb1b480d5d9d6f635da4c97e35bbb713b7232ca97075b7a9470905c1c56cb65ba7be789b0509b4f81d30f13f3455af46b46866d4d62be0a6dff6e65e717efd22cfb6b8cd0e7538b4d91a4f53ab605c49e512119e5e923f02744c4638f952e7980b82c5d828926bd13d4c9094ce6d67c1bd3c143643edb670105d2dcaed07e675433b62991d4cb67c2895dac062dc79628df2fa7cdaa33d19a63653f1e70c6d1a5ae8c5db15ca163d8883ee50030b7845dd94d1676234800171c41fcab27098b783100616c83d391580633b53f4108eb7b40f26708aab7c3bf16e5c70f2fc5a35e20bf7d313c3cc69fc70b109812158bd85a77db76f4d092c83fcbfadf266686eb334a07fd16863e1fcd3bcab571f0645b36ac90608bd6cbba0afedb9c4962b5db02a351315bccbdad0e929176644010bb67e3cd9d67c9716b499f5a99556d4035976e4aa616ddc8857db3712713f44763bca1c6fef45085c2976ca733e539908c96611ab8758d1151c334d0c5a0e003cc79f28a42c30085b1aae847b05b28354ff84a89f62bb5d3d8fb6ca8de67a90be7a330cf0a2c567df645af69d90c319e0aafbda237e702f8d5b176f208a8fe9aa084e8a7d9ea40e9e727ac9975737892ce42a79c5e9f0e3d272997ed266a7da416737433ce7fafc5a08d874a83274d760f5af5f7189d4536e1a2c189b922a7c464859828c07f2921f91753046a1f3e5ff88d3fd622f126e26586f3331f6496c2cd2b31ce9b0350cfd073a894e1e231d5e87692f250881a3dc9b6675c514d743df6c090808f406787ecc6c603bf35b852b817811c72dfa08c28de18c7a1516d5ab9df189267108db0e91ed9bfd590b305faf6b27c931f77732e3123cef2847622890f863908168707ff7a7496c71c09d3071535c1ffe92a5dc1ec33907374d15084c6aab54e8337595b6b41e8f80521b9d5ab11665ce12900888c8b95c01b094c9683a6740a89daca2b3046d39701f9a3e7bd9cd004cb8930807166e2b2c250d13183f2a1793e2caa084759bee8ef6ce91d06216fea2821898c70ae7a9bf30855f2bb017c93dde960cb0a338345bebd219a516752f096bac1224a0d2065c06a9a7ab9124be6ef94a7a3fbf910f6f1cfe6035ed9c8dd7952cd140db39185272c91213c1e3273028efa9f94094b508c7d60fd6a6f156db395aef19c61a9f5e7ee458b5d184ec1846b8250a60e4f5940625b49b0ba9ad017a1e346041c53b24372a19bb4604709dc3d0d5899b705eb11bb45f7d6126883faf2ab126cdc9b949f37574ab8726f66dbc5962340eafdf75a8c3bcd590845d6447f24ac065d036cde001df81cd558f4899ba9454740a9b5cd752bfdc7351ad030aebc64814e8258f9d8ecc5c1c7d747be2a3b31235fef97521078a8f501e9592fcf4dba06c419c6341527b0eb2f3836a8dd05bc165aa85adeb21341ead5d18dc7008bde63fe9a178efe446c2a2a9a1a221df0ce2ab9fa4faa861e977aca6f622f593e8b05324ba42594eab4a17c7b4b70a3f495ccb10e9c7fe01fe68221c0f6c5a0c1b67fde56f3b3f4156eebf161bc267a08ce69a350e73293a395bb3b08dc794ad4eba0c00ee5c1e605577550d4b437bae099b28714436f4dd4aac34810ead3ac103101fc6478e20151fd4387acbf687f3398d3584e76d1898d9a8873ca14ac93c37811f84f39df2d63798bace072caa294688a6a032745888cc6dc930a2d3099b0e4e03a9c27afae7fdf144219bdba9264b222ecb855eca7d32882d7380092898f456380b2a5292becb91a63150ad260d774e11113b5a809fcdf69c46b766f428512a0f104e2f41d40e786b626c2a34c9a8ba6146f9c793002e790f3499af85e722bfdb0f8370f17f4f2c7ccdf1d95f5529d343a43208655cbb39a83d7f3753ecf6d0c7ca13dd7d349738e63e1c16264d37e1ece8a8f0a3ab692306c3c7556f2b7cc9301121396951fdbdef7b409f357063cd6b33975190845ce56f08fbbb9085f45d8eb1a0ff2ff7cba19e9c908f687e3833089ac205796ce2dfff71bddb39ddf616a8352d531b2e0efcf1199cbd2003296cb0b24ca49f4de9070422eefad80c4c65afee605615444e42061f81b61000a889d5c0e6da2b2a7885aa0480e29120d87f0804b66b7b6412787d9d8d0160fe5d49bd7894509872fcdfc1ab1041eb8d15d6c9db8f65b03e99ee83fef65f861cb696931afa2f1e9d3c17f80caed9a4797158cce7da31ab12389a7a6d8aad1f4ccb25555e6be168f0f35a069c645d32b46945deab9356e8670dc5b5b1d58de8ee3ece3c16e5edd219d0b72b6832ea46e6de7e4640e9ba03abcbcef39ad58f0e7afdf8eb83207a3c79fa122afd7103c0ce28fd4f113d6396b6494b11583b571efa60bd376bd24792d11e37df8e779979bb990274166014bdcd9235b206bd194617b721eea88b330127ae36558d25d81127df832958f0cc130bd36bee8f7b6c676767848701f801e1a35eb642f820c36bb3c2ba0b08c78f04724c4d17498d8c60599fb87492be25911622d94871de60395f330f2c426c082205b31c82b40b0f97e86275717d8063b39e1988cbfe85fee724cfd392f1afe1769039a8957187d86065fbd5faba7d4275fa150f40706be4bdaf8575e225ffcca2dc05c61bd44839b5bfe7d364172ec630fe6145e929890915734a600507a29abf74e0e1e35432190f49498c90edea6a185360147df9be7609388449eaa994a6a766f85a0527071544de2ae465c4e662dff549e764a3256d48994441fa27d665b8ef86a39bed261816c6cec6067b74b4a82545df5e8f4091c07621d6b3ab3f7c1bb12052e16d1f0c2ca644b1c9e68d1fcc551b0a55dbe2fce314748c3f7fe7e0a075dae5ed5800bda7c1982ea8829d16ff2d250f85125881ac1149511e347807e8b80ca2cd08e86c5295cc65f84b2561db0d8c6cd34a6ce10a388cae11de0662b90fdecdc436077c376f27af03c85cb06d907f82e342c08caff4b2e6dccac1a8f9a4c7cb86379ddb4db6f3ef54856f4499c24ac98b7db759f9cd1bbf9589bf9eada5d70112abc8e005b3dcf4452203bee64880e8642a96cad757c022fcbf9f64d0ce42acdfacea365505f8c326ac337e47006b329dd7ba76ab9fb7dbd602134b37aeaa1330a8499b136eb8b7e15b227f861b401025a0d4e284fc8cfdf59bb4c887ae8050d3206e202daeacf32ded378553bb88fecff4f7441b988faf3f654775002eb014b779d9014e5b99cbb61f3a9ae23bc69bdd51446ef493c17fafc5dae02c4197e9565db1bd91c2524c39c0345a164cfb15e099c9ed0054185ae203f2db6dbfb1a54187a1337a9f50340613fcc206c040a31fae27213a88a9d29fed9368be476c66b95c0a946871c12d8f6f83cf70aa466f41f70249910fc15b81528d8c67d9cda3d4fe5426fec7d18dfcdd8627b8e35c7a617e7f0bc897b21cf9f77fd70dc7c564073cba1f3f6068d79e62a3d4e7e8c597983a05cc20de6ac8ec0df422d9a16453335f07c306ee1dec5412eb64d44eab6e91ea1f368633fbec505329abe9a70c9c8cd043613ff2a7bbd34fec8cfccf1f24eb1732f9a844d45bf43a56adcd25174957faa3a0d545b557e29bf521fadea97c8f1d10765bc52177c7bc62bef9a37d9f2c821af9678d068587b8771e55c71d3a04717f409b2e33363f596788ce68e05adc92ca39ec8a61607474b7a70f0f6a51ae68ed04890689d1846e9d1e6b259c7ac22afbe42d13235bc63fb036c207860788c7331b1c89c7b517d6545e146cd406aaeec42dbcb45be5dfab613adf4bb5fa87802a6c8640405ce9c79b8fee0878c04f213071b9fc0efb3d7e5a26b63a59cd6a5eb407c097a4d3986db99adf5d7ff56bd45755a85fd0059d1d7199d0bd4ee5947b9a709f23f0b4d58cd02328d19db9b014d4ad7d4bb4d657a53f8f0f7bba4682ce874223c81873b84f01d0513d3899b53d14f9721fa9760691a1d6dfb99e1381eea384043e906c981deb4f6b0bd6286d18d5436cc2ac7b6ba56565015c1ed1de7930c49a4b3aa92903707ffd301cd7f58b3dd1d82a0363b6ad420e9b5f3f90bb6ce4bd6ede9b698e24a2e58c603156276860333934b325b204697482b8ea0e9c5ecf587cc74fb56b3977a60f223345809ca5d946b4778bcd1c0b3923b0d82a7fcf20233ebf2ac891c0d564e8b55739fce2283411ca4c21896dcc47d7f045498c3629acec7793fa8d14398bf78d184bd54599db25e9bce928dce30615bb69475129d01e336970991ae392c64c05a3681ee9c3dd129d761d4e326326f684f4e9e75d854447894a47f85b174b50f7e959157c39170c0df4c944d861a679821aa2970a0d093247151571129de8222f34e9113490021a11f14f0fe99fca144065c1e739a83a1d91140d7c4b36f30c2b37ff65c5bed3d72d0e9629a6d141060f0446df9e44246194dd3c16ac8a852cf076b189964d1397d44cf2fb4fd36fd9c00a86d5c3af3040b77d3b29e3427957a363343868ad1d7741e240117baf6f9ed909b84a2a060d443dbd8b7f1ac0801c594cba3fafb7d5753727202a0ce4f65c8921d8b91950f1f696747c4e376d1f6fd2d2660c7797556fee60c3ddc44e37ae6a80b17d710f5a457b6c025165f083cc9c7de58300f504dd59b94aaeaaa59bd22b14f1d934b5871ef90e4201aa1137f54670bb761d29e8d5c5453ffb0c3b96dfa45bf90fd2f7250531c70bb4ea248a5ca64fe475c1051731a2fad75159173df61e430baca938dda12a4fb0c94a467b91e7ad44dad815f780c6fe9caf3eb0dbacd6e474eeafdd19ee39d2e7bcd43d21cf5b3d0981504d6bdac3d1816ecd16ee42260853d6271f53bce0ab1f1d1e16ae64891e3fb9fbccda0fc24d84c910ea48e28902c189dad992ca6be2ba1cd32169cbff520e0e3bb4ecdbb4ff97d3840e70ad964e4b617b65d69a4b742dc359e5c7e147c151a08c1314fbe12b001f94f06b8759541d33d2b076cf63b604d181a00448943726f304cab4723c979a718246e905562632218e84615d9e1a79caf95ab302ba46515b165a1ca08cd709988ef097d2d71fe32f5a31b7c16e96d43d30d82e98d0ae9ae6b063f76ab8680e6955d0e0bc870cda41750c2b89db2b8b7b0c4d19f5ecbb3e22ada908f19dc854d67d1a5c684b5f62d56783dd4ac96f706d923d12647faa6f500913387dfdca9ca445c7c93c05761a002a0543a6db29b63bfc8a41be7a9f4b9f9911e7cfc961aace62dd6151e01dd83bdccdba8bc45a68398f46a9f0cda4e2460237ca167a571ffc81ade6c16d45f65f4c8975084f7911c75a74d104947353ee35cc8fcc70c75ced7206c10039c04d60385ea1a228e9922e83f00f46c9e7c4c9a93f6b37d23061dd1521aa3e2484963cd229b0392a72a1a0d3722ee824b5755e2720377b650b1552085310893913af6e5db010daf792de55de854c163a1690623ae72ed2a5781c8b1c3eaa925dee019caf8473ac89952cf0512c38967a437adee4d0a9f30b3d88863856921079c4c0a084b5b04cfb7f9dcab2a36200eca21c47292ea9b1d8785c3ee99cec1979c873265c9bca2caeb2294b2319a5a612c629514cf958903bc5bd34d4912849d0cd73e543b5ed78e1c1bfa055a4188c41493e03af79b24e116fa952ad9753aefeea2f4279be3b3b3392f97821c317c7bf2f69425558047ea2c584b7f845465c73e63c18b72d9211e737747d839e3de99c5af725d9487227cd8dc377597c012d5bf73d24d68d46448933fc3aa4305f1f756caf770fc9dc3f7d608da9bdfb98a0947cba0a18e07144ff7eaa1379216ffbf068c460eb7cfaaee769542f6d38903b8b8e77469eaf3acb24fb01fd33c83eeb479a2d142383e3a3349132f6413fc08f54aaa9a497ef39009b7717e75addfcdfff56c634ac4f12631efd9abdee1089ff863dbec6069ef07bd93883a25ec3e0f1da5ceb7f409bab35e069f4b164a27bcb52cb423b6ed9a55f41ec0996366725313d290c9494bf4e0f5f1b0177017b38ae0ceaa827b4c74068281703e5eb37dc46fc893e9daac10400c54fe902621cfd20754592f9b8d834d57f51a5319108990e23de3546160feaca7d6d478eaa73c2873cfdc6ba1c69c5214e02db8ca5f94d31ec4ae36cec8bab6f0805b3a99163d3a98da96f0ee8151e00bdbebb50bfb897577f6aff08f026f606789d2ed99b234457393ba6c5257c0bf5a4883637f95ca8bbe4b3ff7e9fe10155d04f4303c762826eb8ea5bf3b0c20dc3fc8b7b3c7de11a79f55b21eef101e4025ac7ff9946ec6b88f45f2c141dd4d522ef9455d58c841d52bfcf0e417e465e45a769e0654967501449a93c1750c786d4a0eb0d2aa279730642391a785cd832a4b8e9730acc2dc4d6f5247a6f410206eba651cc0d988c712cc244a1af87388f7dc5f1b0ad931165c3060597f6c4d188cd7e8599df63560b5a4e241827f1345eb925dd2964b44d1e98c6596b8125fea57bfbe1c50fb08474584e3cc936206fafa5d02a0d8c693fc3ca8cb44419e976b0a8bc6ffeae7b4cb695d93b00029f45aa342b7c5ce1ff2aa57858dd5c7634afabb82fda265ccd9e9834e64793f00a9b00cfe3181073b8501be387a17223a0cafc9964f56905895b1a05aafa74fa33fe4484d093e068f3f8dda719a0433dc211a65504cf080646bc29bbd79fb9d1206cf4bcdeec6e34f743dc1b1a9a402ea6492a27645e62e7803b1ada55df239a9dd934eb349e199216d7d939ffa16b9ea06f7e90c038a281efa0e77eca276ff56a5c52188061c5a902fc7f151cce06da55937d682173ba24477cb717558e3232c3630b56f5cc16757940a575abfeceb700cdae94ade34894a5fac921203d55289202c80b5cb92289b203e7abebdbba861b54d1674589031c987bb05f936859aa12c4eddbe91ea88ed16c622286958f6887df735efba7b45f44bba78b83d06d0500d2a775c62fa2e0c424e6870d85e38024736ed0b67886f74357fb9751784980db37df0d218dd8dfaf2278988c707af98a2a994617531b0aada9c6d53297ab6c17868506658d7a70b84de0ded3a966cc2cf64328a117a6ff1d3d804a3064234108a043034a83938400ecd36d07eee4c256a8301aac85f47738e49cb7e5e87d0997d017257228decb067c732976af3c02eecdf48e79e8848ac6e59067986eb75cbc2edc81156b2394832afc5314cebeeee15b8ac8fb023379397ddb19525367cac200e5e2d699ca1c28a18bedceff670fa33aec1f189865e3feaba5d515dab20b111be28e0b80254cfbdf3bfa131147a578d467db832544a2311c3b06e5135d6e4cca3d8145759ceb9062e884e8c92175a170565e9a1b8568b1dd8422d10677f59c859c8b2e78a11fd3c56de531ed033655227f4f24d951cdb43251ce6ed52485aee89773a847f33733e5f705942bf674dcd889eaaf9c461e232debe546f3c79fcda5d1f12b8d7ff65009da70e66637c800ea732489d7b5031f5c9cad6728314c5490266d6a632f0c16eb673fb9ce8f802e69915e90912eea3d0901bdf8ad3b5916193aff0874811added1fb7b364b5ae07994bdcd196a931f85b038743398d6dd87969715a0f03acbf12faa519c5ad782ecdcab24a4577e402c13e4fb8389bbe13ebc10e24f45af379856bf9c52fc42d2822be71b52a3ba24c6507e984d08135076a426ac868c32653cbe853f9f3f3750abb78276c905e243b446fe48401dd84f7d23ce2a483d1723ce67308b4c4605fee7e3de4ec706d283336dceb46bcd0a5fd1b4e3ec2c93d291c4a70c67dd5f35d3a7833faeef1a7ce8627c875e05ba88eb59484f4afdf220fc1315ec2f302109098bc6eea3abd6cecf1d5ec576e15a8de9a2c92072ecd6e60a14b1391e2417f18830f561349d0853df7a604fae46e36aa9021a27cabcd04f179fa98e2c3cb198e9b4cbc3654798e52c1854fbf798cf19c88ad9333e1bf48fe858883b3bc296c7e4dd8f9fac82c2014b584fae130cf84d6ae5ac72398ef93fdb3623f00a884d63c50a4af533cc80399e2f8502b8d51598440ada903c7ce76962d61fea28f38570382e2a3877b2f9138e22b57ece9ec3f130946247f9c95b05020be3c06363edc860252921952a46eaca2ea9760baed1971111df4424b464f578cb45fb8b449adfef3581f88738dbd0efe01637c540f82ea3f10effc52b4e331d7fa7dee809bfc6cba4ba7143384fe094eba9466dad3bb9f7526ac4b36a9dde5f6064b2741c8154d41b6a2e21409146b57409e02bee7d4f1e64f8e7347a0211c282796221d7d3dce504e7bf74d7bef8921fae5211dfe9bc13f863068b2634f17ea8950c08efb2d7f492def48187c390555278db27be587e97721359eb25e1716c2b5ecff85dfa945278a2dbb964922cb277333d8f6d7673b3ef0e41944aa1b0b866bdf9b0c9fbf94de9b560e7e60d3ce3296c6d52d8027bfa9dc4ec2f426787166974913a50784952f81dab60aeab497cc35afe17b0d148d5a051fa1af262f86a9599966c9d66a914bb03ba642a5fa8be84e7d66115a037cbd2fe55bb7357dd335cef58bba1aa22cdbf4325ef2f54f4e9678d6eeb6baa05411353b57e397291ba1c71e82f98817762a05f37ade5d0d9b12428d2fcfe5f3c8d3991c2ef898c3abdd5549b66d4b0da8d29d6bfcb38eedf4ef0a986f1b3c1abdee9c28e45e525dacb039fd07c95da847be5eedb20477d0d71064616e1f14c057bd59c9d11c00eeb4750bfb3ce7c9720c45344f659b525ec414e902d6495e6fb862b5d7505300e2c788156721f567324269d7a9c2da09df65f6dbdb8f592e97f240019c488d76859d323b8db068ff9dce35e22f636357ae8042c872f59fe8d3bea3fd6667986c37ed1f67e1ac513bd51feafd0e77fb634d9ba4019216788e8f583d12bce0798c119cc9a608d3b5b9590ae9e1f2f0d50fe1cc6f4a9ecc19f770b17a4352990abeef6b0592841eaa89e8841c5f7fb25d3752202efc5f66e71900e3a8ae1206fa31b801d6435d8ea6cd7b8982b66cbc7c0c9b64d7a714907a72faad6ecb3408462a8cbb6dcdb82281d8197289694d2d3a23ae64c5146371600109b6762aa2a1e26986015e2cd3b7cca36f18a25cfffc0a04871d5082eacd266f31737413fef3a2a76daca5dd899e0a49cb6a97ee11d1777948b6eb15bf289317f2854235ef3abf47b6de090cb16441b4fc85e5ae164dbd7fd016d777a8971f111e7bdde1ac98a8049e55515d81624638da764ed736c91fceb1c960496210d89e28a6ff8dbb67f78c6057aac91d93e9dccf7213050f3dd3c87b39bd02cb0a903b51ff54501b165db060df698c1de130e549474e6f2b9eb1a1bc88a2609d589052814a673882c29ece940b6ac5b63643620daf67123f6cdbc6d967c4e124e8c1695844334bfb3e8b790c19d65d8f11923e93dabd19462ad967ce3c1e9762250b6309e17f28c9883a53fc08b2cd93b15c08617cf764f31a0bfc4579e698cf7a983c94c34c45a9650b981205d9a4fdbe2c949c6c174e37bf367a0594708920f7e306be0dfd4504539aa72f8d5b7ff47f768cff9832fc7ac56bac5af825ca29664e852b7a9105b2a98d03a4b4b9439c3d2f2d34a72d1477fe541cd8b7fd644e2c7140281baef62a0a561d025f10f14c0cb4bf14ded3ede590443875ceb942a7ca6791bfce784e4132f48454898b618c273b2f1839e8f18f4557974f57c47c9ccd8205a071112355d79f6b54e0b1069c383f3499c04df394d77c88fd711991829f53c6af3c20bf2cbbfdc57f37123cc2ee1044c282cabb94738dc887c2d0f25430e3609f59a1605dcb99827f2faae34fe2c0592ceb8cdb107172c1cb1e061cf94b1fe246eb930264c61b575600b8cb0500908d02192afb4670bb5a40fd824a2f53eadc77b0a04de6e8d4955960d931dc639fbbb2f57c32b6e2ed8011605bb600a9896ee67b8bb64c9806ca5f805aaa02cf6ac9541247b654856b8bbe85f4e778b443e552a39fdae5d23ac797312c12823dddc0485eb868b1101a404dd134a7572f21ce02368618190500a003e3fff75a00d57ccbc85fc42f7ba924d475eb54ce0ae5927f10bd6350d974eb4e178ea0be012468dc3d104a7d541a9a3afb4a12b26d20f0802e198e42e10ee97bc73fe5dcbb7b0030446bf21c66feb37bcc2d5f88ccbe9eb08ca44fa2860dd43ca2ef0491e3713f3c923519047dd945021661918ed8684caa0b3961088999b3cb99f0212816dc130f5c625f8dec6044b0b941d0ae04e4f87762ef615ab494626eb0f7ff73cd6110a46fe66d816898b975c05685784052ec9671eab0b0c3b703a25c385bc8a2fe10a770bc20cbd8d5dd0c805d6c50c869b94609e62423428e8aa4d8c48352d53900bf8090e5d6f5aa5a4dcbcbf03c46d8c2ef3b282a4fbdf93af0a71197ee92565b7c8a28e80cfcfbf62826e2e1e188cc5d1f6df08c504f59380c4bf87716524638ed96fc2a076ced4c974c69cd820f40dbba4abe85d377c91327e8f8578a0df50beb9a7fb8bf21c423a0750a2e900529dd363fef3dc4cf94ddcb033f2d5b947785aa957dcf519b95ef6de2298e7d69b7f05dd1a722e55daacf730bd0405f0b9a09ebedb25700a31ae79b4dc3102e1b6624406adaab4d0d39886d6f8993ad4538d1e4edf493a0a4f2da4c60a836d9059249b60105a075187b1db3cfbdbe9976d91d4df6d178c3240fc6a7de95ac8ddbcdeba0e35e5e43b49bf33791d55c2b1d3e1bbc91834419ff0468ff54f17f841e6c09f3aeaa4171f4dc5eee15695ef2d50d9fbdcfbb53f44fd31c1abf3ecee2f3eb3043998d26eed0ee3b8d5ee17064667a3c3d460da3cf5c03482f8f725de4782d5666c71bf04719b2af1350634b6286b48e64166454e3afc31378ab0af52dc0c4e108a4f86600bdb5d0266154c76d9a9946a9f12d0feb3cfd7c94fae2b8839a9efef4fdb80ee416111d7312675946d3f1c145562097484fccbf346e181f0ed114517ca6801a4fe173b6b9dd5def540363903540f7ba16e05e7fd8a4309ad42953c4003057a730d73294757d771ef52aa0bd3edc5609ed1d4cbc176bfa31efb668140d2a8682a73f8f15131994a2c68fa088f50c734b0823cce4898e87a971093d47b327c92f89c368042fdd29223f564b5e983c64e34df8c9a48eaf4da7c997678f6215a5d384f17ba750f988affb4b132e6db865e60907ef66be47fb9e144f7a6525a40b5c46047f8d8c89e77a295b79fb397cd6ba3edf11281de0e62e613fdc87c11ff479f35b0ddf597c4ebe3ba21b67821e955903b582b965abd40a5f8eeb8b081eda5e38dc1117c67831e98f5dcbd9690faa255db51f2d5d87fd8ac6187d1778aacd95afc5abcd2603d9ff83e0142e8b57c935165df8abe66d655ecf5ffd85ac8807532e343af703e1a5b2c66ff800a479e84011fba51ec6d06264203e18ee44ad40b55ea4d978b353dc8d54f8d86b2ff6d75452355bf42e3acd6eb270808b2ea808da12f132095ab84ac77ce9af7632a28fdfa249019d2d0799f7e57f1869bead8268f4d3563ea36541b9b1aea716a62495cc3e516b325c61f08ac1f5e4a4d8965512fe9d0145023d36b76808dbb0114760360ccc83de589850e205c536ce38793b6fc13aeed0fc7d0efd97ec57b27d8570c80dca84d85d0f6e1bbec95c01d55af366c6e8ad45d1abeb84494344bee6221e0128f349007c06f620decce95482f354f1028b9e463778122ba283d0759c1ca73362f0d2887009079e9985fd76c064f8b3b52230a42eb991366ae3f4ab5830e5b925e50e0fac20960a493b84b759111791c3f282ba30854bfe041f8b785b81b6bd137b1400af5861efc19f1dcbe3754f721c305d0464fe4283fe9fd41d81c005bd36ee0784f3c06a467f14d5fbe5ae72040c69aac6430a2c860d7399cd84a4ff16bc2acc9ff563c082ea66e52318f7e18cc1128a42ea20a613a59ad1ede5d0908b005c0fa1af11d5741f6dcf20c269a8be9db2ea11eab3f6014974c3d8abeee222c8483f7e5e1d647f94c56a57585d50753c8c0d95abf06f93596fc51386713496d1c3b8956c1fd628fd04eb550e2000e5715d5db3698b506d09c4def80bcd02fc0db378fcf23fea06925a78b6e93732d6f531ee50659c2b458b24ae50092bbd723db43cad8b141c8a1418d6188a3a66d85c241a673b532db7f1d253385a464d349f6d7410d6a16b0d99c01e5563dd04aaa2eaac8375dbc294e2ef53a68194b9d7535f00bdacce261dcd6eff74ac12020e1a0536074984c63c2c29ca41099a8282d0079e6e028d53d911af09800f539d32bccd7119440ff0ef8a995fc2344e5943f32a37223cff3f640ecda9e5d06b250f59fbcc80efb9a951b006636bf782acc6fce2b558a0ccbeca4f6de08e12449053365e4bf76d84d19a5247133e0357877e395e674265a4bf049a9b7570fa96a02a9447d18b1452c362fbeda1e1c58600a228ce1a28afc11f5147557be74e0493b164a5ea32658e86113269563d8b384d9847f07fdf6468455a43abc6d9a99f3f9a44b1c2fe669a0fcf92549250c1a357a5a9e6ae22e00a5b852bd9703ccfe3bb3bc6104feb378b03867d8507fc80aee1b1297a799d5549fcf4587ece7a35fdee33485dca2233a5401f6810ec38ffb16b17cfcc65549a660d271afcaf673475f8c5dd8f0e76cc52daaeee4ea976131aedc92bb9060d56abefb8b4e291c746eb965a92339629c15138822c9336755e40351b2883887b39bd2a8ff1c4cbf0af67d390dd31bde5bd5afb5663e51efc04523e4d49b3577d1f7bb89bb36ce781cc086273ed9eb504ec52e99794e03877a6825d0292813aedfd23b47426c5f9414c7d644f10f27dfe0f3ce0b681f7495ba070958b66a6bc10be7ff493a2062bf0d5b353855d472a96c707ef8a9eb49b41bad7a49a8b5c669d64bbb793d1ff69753110399487f3801efed3e601b7246abcf8678b886bd30f3dbb1e64c429a1c51e0abd907a7f3011b8b921c488aaba48aeb168752bb9fe10730cbda38c18193bbbac242f7c653143138877e69bbb795f65439582348978400f1345fa380540e597057ffde42f5b83c5e307fde0f3725f240cc28a9815297d98b52dc72d91c15504870a5ed58c5b6699e51a16ae2e2964e10046650ea7d735dc6ab7ff1af76374fabe6be698e5e8d1b0a6b086413387c7ff137281bf9df09c469fe9a2a772ca24288ec3a8712ded278896dbd7926a51a75ca59e583ae6150492553b204b044e4754d37bd12997cd6823169caeb632728b4078ebc9482b2f86ca3ad90bbb8de6006154cbb2409e8b96f786179f60ae9b510e7d6fc666d6c9b4b3c105328a9db744ae458e9d0a96e78f1724174cda6ad5d73653e3ad0c918270217ace1e1827a98fe86948c309e3a05c91c75759f37a83ff5a65c1d9ae3bfdd5c5c821b54f5503e85c3d530f08446497a7f5e088b3b329577aaad78308ee9774d776d524d213e69f171fec0cda1d1ff96e6086cbb58d130f1b34e44caab425f554a0883b2ca405474d15ba8b753cf93c73c9f4742f40079242fa77af2614db2876a389f94882759daea8b9ce2bb9d68986d72accfb1a18be08b5ed1659ddf6654db59696d1089800347708f9708fe4866cb76d2fd75ab3573748351cfc4dbff57ffccde92c4e55c5f4685d9b68afbb75f80019751e05549b9185a4b91dffd09dbcdc2551a426c82efa27715bd23d88ffe2863a3b8921b9b7cc11c5fb5b4b3b497ac13019ed9df158571623ead23509d599656106fd937641c45143afd288d3700da57ad86e515fb267f54e6034981600609835dee95cada6d18a857ab1fcf7260ae3c85f454eb45f9f554022e9cc3781a0655a89857032054b87f236c1b8771c2f2edd59b63ae96d009427357b649e26896cba7751f47fe5b6a5cf757850e771284653225327e963654eb1333ca4c53d3d1061d5beeb3dd344fe25af742179c7909c894bba25a23f45d3179a08f4a816fc7d8e806d34bb762347deca06f61a4628e9e04050698e3701069364160b83054d7bd9e96194cdfa733ff360ccac177860dc5a8d34c8b137e1ff69592084adb4073cfde6a2dbc13f794a8f0fdbd1027370a263b518ef799be08426a1cf68eb8ccdbcb08ebbd920daa650cb6a12653759d3e1d013a6dc1fe2744014f016379107d6762863dd90244987a87c934f444342edfe615c2ac0970fe13d472a0d211065c614ce7875655d4432c0e5de2f140e6c531b217fa03191aee250197317bec30ff23f09a2fce0620cdd315c0a09b22cb1ba44d8f4c819354b807df1da8fcdaa39f75ec86669235fcb73199e7d56f38b9ce8aed2c39410f832a4d85ce02358170bcad48893dedc096daf935b1f2e973ca989f0d282b545b1251daa547118bee498ebab07038014ee85ab63eb0fc9d5028dd6987746756ad3e56bf7edf75fc57307ac7d1005ddad75f36c4cc468bda53af89b5c9bfcc98a190e9e869911e0dd942e8abd3a091d1f9ce532eef8cfd484d80b193c49968c1d8b34447c2a3e063bf783d6de3cb966b43a599421bcdb3358f9b1de4b43a3011a8227fd5e763c4c484f1f049caef9ebf35122fffd3b268b041a22d52e911b96c6253ff6a9a82a154ce30ef364acdf3538e848e9e72173db47d77e7347e65057bf2e0121187c97a963fe75bd3a4050706577b5f041c21c8ff59659f818f458dab68f0622217b871a788ac6772a18b880d4a153e7a90ed10c1bf2835fcf3f4f2e0d50fd591a7918d5ebd442259feeb46effcc24be3916bf7b3bf672e07e6db3e60af54254f4ed1c1721df971e47c92ea5a33e656c2ef6f862a9525a1e76854791150108fccdd7d9c528bfa73f5165bf7572bceb481653e00520000dc72c75b5c19e0cc1da249dd7a3f87296a1304786e44034ad1c7e7970a8da3439e1e22be2b59af08e3d02b1ce02fb20c1f872038eda43edfae7eabd36e35a9e5d32b717c66dc78fcdc1c534f2e3ca9447efc4514c5cce08565b336642b49ceaa0d74521911138ad521b0d69abd264de62e511dc38a71f260073912921269173355a2c1c9cc6bc40ba942bac19fb615d986961cfd1d76ae0efe9ac1b07ce774ae0b0c454a0b6e05fa219f6d27906b93a7405f84ec3f6b102111f3d3ec01bdb8af6e96569e4dfc1e86bc438b885b019d935dcead8a1defe91de9d9b93defbfa2ff281eecdded3ed9c5958a4bff9a7a8e9f501a39591e1bb8fe73e66f8de9696cfd76bff3af23e4ea1f7927efea4942402b086a41f6ac4ec6291bde64e81c322e77f4794fee4fe8c2443cfa049ca25f16aa04f59460469dded9c1d37a945e04e9c435f8d3b168f59bd336077396fd382532b931c16dfc77c77b8b95a8fc4373ee1c419097d6ef211d9269f841ae3c04c7297f897320d3524d61c93e5a4ce4fcf5212ccdd68f6df4b06bceb07619011d71118072a2526e90b499fd01d5ec98b096f8e7f6f11622ca069a07772e2f2121e9e4cc6c79b5dc5df40dc2fd9e1a15cd4143af990667079de4ad54d4258257d709c225550faa5b15e86625e96f2ceb50e96780e6e31dab7850bc2ad31954653fcf81baff3c7c48d812619b34455844a2879ff8a18e5582b51787ead83b252484003661b264325ec81fd7a2a35d8c2a5fbec0fa57da4986d146ceb863e995c45d3607e2f9fdd77d94156e2b54b503d92c3f7b0be9b270e9c4112629542b8c3094d8c51d56acadf57b1de126f9a1a92b6ba923537218f3468c94267e9fa0ba637669676e2a011156bb605e676f7059175cd2a1e35018d3efc5b77b13c99733b84cbfff2b4ba3edb6eca05256d8aa5429d5607b6f44547b31b2dab1babef4c4dea5686b810eb5ea6a38a81d943b4f7b1810094c9355f7a7a92aba522f3a5b37b32625ed08583dc2223a44c792709fd23b6580ebe45b212b489ccdc1d1949b388fda40ea74b3b50945f3a615e3951e1f2e10b6a836cc76ce323f63c3b8f2b96a228fb2eed68f07cd96f3a331a0bcb60093b91bece930c398c1080b57ab6d5b6963a00a568206ead4a5ac49b9acadc9bfef7cc15eec57a9baa5b4ca00acff11cb23996e32f74c39274f90cba73a326c99632925f9a60b23c73c217230a982aaf03a2a29a7ac706941eb585fc989c083c4adda417ef91209fa99babbc986612edd256f76fef7ccb2715b50e819ba920e83809bce3db52ae23156c333bcccfd80e26bb7f67955d864e65972e8b69dda23795c8ce60e5f0439c928121d21ff45174194a169dc5a9f54f410d6af029a01c68dd41d9a003dadab13ba5ad7e8e100102ab9ba635504a4118affb6bb4607accce5c7ef6494e8aad1eabb9a7c21febaa25d0238e22519459bac9e5e3fbe6a85e1174b2fb5b679bc5a15adf472accd8628de29722c176588cfbd8e24904092642cd705585c603837b9a6308c513a13510c4f5073ae1b2e7c964b840abea5e5f692f4d24452e25677fe3901b715807da7b0363747e5e638e3fee51c6e0b6b7ccd3c2f6f66011e163503d1a0457e69a47b17b5d7be8d97a9162d14972ffa36947a917440c8c0e078fc46dadb0caffa6a783a5e545bb0a6de71e8eaea10d3bd8b297c6b58a935b207ab48771e520d7951185da107d6a83e9d0f91cac451e5c83a60a89ba1f546c9b15566c01ba887a2682f111b819cf97613cc5917d4f4e14756d86aad06006320ce613a817fc436c139af06d168e75fde564053aff22760c9d141727999a2b20a1dea4fdba125711c9e7a70f60643cdead54d7eafa8a75fef1a87e8e1b55df11ffa79952aeca70bedc6e896ee40cb7910c0d7ef9ffd2c206f88d137b3a0510d87b92d7e667851d43c32f7b420656493fac22ece48e95c85f2dcf73004c1f2876b975c89ad86f37ab2e934082622134424ecac67377efba913a93331218d82239ef59c6c9ff11cff151a25f4d5a27ef519282e4d5bde13bdd64ccdcd2077adb4d9f8138d2affb3243b8cd823713ba8949ec85d847fae781a92d66ad0a7caebc136134976fa0a0854b18fc7e63f09acf282e5951deb2c365d0633d6e250f7d726bc1c0cb36508da6960c42108ac2df0230241ddc3f0748405fc596b6432545189fe9d3195f6e996b5d2f751a10fe3e1add6dfa7c9b135354e1fcb1fddbc8fe703f1ec638e973b125a0b4c1b0f1d052d3020469cbc2d0bd4a577ff74b381d2936d0f34e5f6c95910b81ab4ea6a736578c8443ab8b203d0231ee638252e72c8e1a8d1cca15a2a8465c25fc5bfb45c8907a2f89902be5af3cf2e8f48481007b530418c3e339259a6ceda34205a22105b05fbddb42c6ad864f485b7bf35edcf87d700367ed5e662674bb502b5dc532adbc5b0bcca30275e5286a839d9333ab75af4ee97c727dc27d85b39656c0245ec6f58a286572cf894826e100d9a171f964bef1beddf3b082d6ba14ba22bc317fa8bc5effa4d87061c0f2cce56a7f71fcabb16a135b6446d1b49030530e79a8c0f4cac8b6fa4ac367f6a02489aa1f729f66564fbd6b1666856941a0c3f3274c235ca806ffdb04d5bd8029f6af8db741afc3b82d699aebbed8303a5a53711dd2828973e3b7a7202cc35adbb936aa151c44446b5771c398815b094a593c36f7293822f1fb61e57908f1bcdf8b27d4f67cfc4831af0aba96f7b23f82193daac375734eda2ceb58e306fcec86ec4f2a43f31ec582cd5bb8236b4d297c88e1c1160b9b641cfb547e2cf572028351e67e06b04e57a6a2fba744a2ed35b68c41c5864d4810cb882b891d1fbe406d1e18aa65026537e5cfbfd58f9aa4b7a06f76a510d73859cbaedd794383ed33bd4b1ca75dc78ab26a10bb530967513c91bbc47308d67fd07ccbe2b39b4f348a35be4b61371bc1ae159bf361982d4b9344e6f394dc4be34d3d72a2e350db8bdef9238ee27fc6df07f6ca187035d98d623da29bc8710205c2a12d6ac92f2fcda11fb9e5718bf7abc516eb2f0ac8c35be5f2e4efe35fdda9b90b585db103107da66de32824673d0963589b35fe1488e46b71b8becb1654b33defdc699b028f7a50e7e7774de41e024f11c9f4119c3e84b9a7563965f9ebeb52bd40b484ae2d1382468df48a653191bcbe2654cc3012de4b3f132855b88052ac876a0df91d1e1b62acc5cff5675b23073185e7563e6c82009f98be09d2ef1e0cd3282452573cf8fddd079d071dc7f9b469cc2422c7c291b544683c9d82682b61dbf66c46daa4319179d5ecb5d9eac51b603e74c6b282a339499052968ec6eb48d43d7965ee58041afd41c6565cb082beadf93838e04a3d56fd2d7a6dd51a3474026958e6e9e64e30df245d2db838c39c42cec96f493cf266d56d1ad76ed0c6ca30edcb0556fae711a4cc783bd6da018808ed2a80e0127abfcc3a6a084d6318a6a412c25111f0157a76a21ff1f4f5899cf13eb8870fc2887ab1b0460d9053cb501db86efaa41afb412814d30492567a7add7c2f1e15e87a659879762525f1af2f3919efe390c707da91bc0232e8341c91b1f349062974f352a199352be89c144b3560552f9259258cd9cba2f8b34245c543a780aa1c0f82739ffa53bf2c8c0e37ac8b61f059c28101a808e5ec5352497b69526a8f58033ded9e167a05dac19028697c1435d695e00492e04e44cb1f2b6726799bb242d5244bf18c36bf61a6ad94bddbec7992d2c1dc83161e09dfd1b356f71b3b38127bfba9b1f58279df7b36f9ce72fb0f44a4fab27ee0a3f0ea5f1a52564718c30983a75268086cb59c9fa27dd7c74d897340aaaece4ea6c35f56e539ea817ee04bed847c2c7ea752ac1b6c6701189863136fbdf581c0cf33a321bf9141e728c0e639a575c968db70d9c908ea2213e23e10256a897ba21bad351d909bdd08c7b778e85b364c88ba6c4f72d7f8a22d33e05cf8d3568e17714936293a528f5b091fb7b2fc6e42f85ede68d4b223c3c5fd5cf5916a92d53b38ee8ba8409e81dc0fedfa5c4824831b5c6fec6fe2fe5c2831e2ae76840a44dacfd05376f390ebeceb4a91549fb11cd19f9eba623fe36ca3450c6e194ccc1343b4735204cbc9a4adc1cf68e3443ee1a582994ade1dc036749d9322376ca816ec865496ffbb8a0e3dbb01d513930fa8f75f38029104c392c36942a1842a8efbd751737287fd786fed9581dea2275ee0aaedb6ccc1a40edbe68d0229e03e6117a59c8e05c949a942c221545542cf9206d83fb03050f0311cbe7b86ce97b5a3af864a868caab6167f42b5c59ebe433f5d0b970911f704fcd8f934a8549e4a903d466789b9708eee330197187f235494494254b7835f462b0f791bff21095a9decbfc0cb07726c22f5da936b8d2dfd5a9a8000ce950c36d21ad9c25f89308e6eb66ba8f8d4761ddfab455e91c4618a782a415b17bf8940e6a4c369d8a37e2ad4caddbd2c86f71d95d4ecb5da3892bc43b379e46761afea4c592ea22794b4681be4d714f1df1cd68ae89df0fa6c38371c06ba58df2482665aa5992c52ff735db9ffb708b5344b7a9488dc91eeeb34c7c798fef8f311ac620f9e392412fa7778a5d1051cc06c8f3bd65b119a6086e850d2680ba306abe93b295ccd34c600339f3428039e7fedc0524d8f1b3c7aa0560e1cd60f271d85d3cebd7ed1e50f409c9ed4dd9caca2fe7010b590c9ff26633c3855c34d5711824da5c8e81ec1a476fd92c2e4771002b412b5c0efe5ee61b1e79cd0caaa829c9ea1ad26127788d3851f65f6ac4653004adad5f002a1d3e559cf6cae73c7d9d6e094933becddf3a08461158965b217b1c64bbfdb45b68c7ca42966049667216fe20ca2e5dc9cc6b1d655d45b2f4d8d178b70d4b5cd1019dd3441aa6c67ad4f4e33b8543efde85a5120dfb4a1b027ed7292bcd7d04c744307c5d65af0286cca49c0bb587b1e03b6bcd240835e81a3b165518a5bb42ae4c94f3eb733312c88988c5f2119f0fae3093e838faafcd7db066ac9ad695ac59d60b98e2a971bdd15f1f0b15c41722b82cffa368f5af2aaca6eca16d774217508e6b8cbe454cd4fa0dea18e8499e41e506bac9671e1fa58230d5f06ec9095c7fe1b3c4731638057e1cba8fe1586c3ffbe0c654f35c9a5f1a468cc3a53e2e0366c437c21616288acdf833328c8ad392e3fa7cbd2558a711c8035aad7f1557a369f886cb84c67eae8fdb1207cb3fe74b4c035963358afc9e07c920acf1663a74b22a650608126f03c4b192d8bc1425e88b263f8d664f601c3d9d4f7af8039d9f0422df17002918446eefab3f8544af52e0a13287af8de7a9fb2708f98a413b3a72c792c372a271c333318bb9276545151c84eef3d7cfd94208160b3396872644f77b614a3ef544ae93698f0504c94027c65cd2d076c6e49bd3504ddbce29d66e7aadb6af21f1252755fff5a96bc7b53f59e04314198f5a0d13b482790c5316f15942fead319b545083fdcae89e988beee93dc6267d81d6b02e763749b8bc1f05d40aae4501552aeee11c00c1ff9c1421773dddfe6004937c4b718b18f512859e6f77887a8a3ddc8693c8d6158f7364d3a21b1b5ac0f7be5d88ca730514e3b317763f1ee2599be3d294d61b3c59217949cd4cd1274ccd1bfe7c1b56eb584b4c00715517973b32c210a8dbbaee8c817390cab71c806a386c63ed8416e446bc2a1f9dc9ddf009aeb558f884b9473ccae4a4688cbb77f3bcac4effc80ea64d7d8fc7bd2f0939234c487b59b79a6bf263d44b34b1f9972c2b2f798eaeb957df72f5bd5edd295a5c6faace088fcb1ad6d0f59515dede0c8285b89f41ad44c04d7a50d196e72e721a3d4580bd9cd29ebf167d29d5f33e514a7a13f9f2a6d77b031a2312afc2e7fb8628cfbf522a5a891ab809fdd07ae8a4994115ad71a5835cff89ca70d07dbc902ee994a3cdc93a77b7f22a41a455ea352b37ad6eda90f289affa5fe1314e20c59b9b3fa00ad3b9b038e08a6066be69509c1fd8a758e46cecdde9d5cc6e19a1ebc1ac9716678733331f5da39b7013443cc8cd5887dc8b01aa440276e3fd12e8ee4d3aeb6e70cd067365da6b865c020e747d15a9dc68a2a393311e612ad54746051aecbacc2192be64ee9501b26984f91236908940f52d4297dee67f34046c5ece29db1a637002468a33149ea0b21ee19d9bcc0f0e8c789ff3f4b9cc6ec7e113e429ec6a247354f299b8e195dfa4341c516985c5aa9910b6ae84d6b37fc054d4fd78c4e8e31a74a8dcb08fa6a23ee1a9528430a8d01b507b86b43b4ae0ae621b6dfa76dd18b92c665e86c550a3c517fd72df0e9c1437e3f9428d4c2edb5cb55d826dddc2294597431f279e6d5e9a58d166674c8d18bd9fd6c76a005c091f222fefa7279b53ee58674d192ec05555a216992820c14f6e7898c770551e88fd6ca242ba7afd4631ee8dd391240be78231bcbe50706dd9018f5f0165b895e1f4cb2700d1afec49958bca85de3cc766821c9b26e13eef78a04efcb9ee5f9967ff1dfbe07228da50cf1d405b4f797a2979904a1dc0793283e093538a19b772f01c9284d4b26d25f191eb61f0f9b81c7739b9a1b6f2b2fd8c22e35bb4e89e6454d79d1c1912b1e379de48811cf4c50954db16d67d5a75faafd6224bf6d38a2cbd6f25363f74c33476f932ca4e854148530b61e62603749e180491d01f71d2cf0801c7a5f3834e101bc69fc4107cb8ce9215fd86fbd04cc8194333a2aa655042100945fe80c8b26c19a85f87404cb5cebc16117ec6ed8d83da670d2af5c1ceb82b4e9a3a8ad7a42c5483cdcda8baf744ea47c8fe51b03a23914d76a6999ec7324f6b38e6596233d12b16a809ca72d6396670a18366c5c2e460ada4e612997403ca5948a4c2cf87f7ba4fee3d40de60cef0e043632d5a02d5bfc118cb52825896229729a4f52377ce1b14c145ddd21133c4c0da521b240593cbd5cb6dbc1b53a691adfe3116326575d421fb6c3d0adcc40a4403e6b3fec6c5fe3e758722e0d4e36c67469da5ba7640f6d2bae0a8719dfc3caeef4de822cad3f823295d102224a5dbeaf1dc263a57bd2b126fbea90242f61a188faa61e2b0329005284024d1bf8ace0fbda87b8f69afb9182e10e03673af15fe16679664d4f8ae55f3f0e48b8d2f6d312381bb9b259167d3be5dd725976959bc7fad4536d0d795270a0e19d53db7abee394c539778dd5833b484a03376186ee7ab7103e704688355b57f694d796c50c2ee5111a5220c9ad96beb0ccf23eebf8507d8c0d0d63643969a8485c4043de8a2f112c65639f26fd471613381abbb601792c9dbf95eaa8cf97e2820f837286da1c29adadd328974cda0190b380e1bbef68c682552975307d08ba1fd8d6c95399185436deac59cfdd6736d2f449c0dc891e6b4d8d6766d753619b03d250fcba570ff7cf0b3bfb6055c8c052a775d223e35d3e26c5817b97d0ff2656852019bc386469336bb483f0d8c98ac0028b73a1b70a2bb82d9dcf53968ff9e88b205f72c9acceba27cbc0788ab187b79574b8004c8019069118062cfce9caf99c2ad1aa5e21e57acaf9dc0f10e88b0798bd8faa64329cc399e02eb7ebcd8e5f9bcfd824f1e085ec274a8664f623d653975afda4696e9a03c026efaec96cc042caadaab74e1451578ca5fb1a1632217ae859366ed68d8c0cd26d6fe63ab5dd69bbf68e8b4fb6f8effd10763355c99926e7e55a713163aecba633f9ade8600a110eb493aa397f5db10e01440d1922a5072d0d9bcc1fd1d4fa5bf13ba3c5e097ece2f5314cefaf586699f4e65d3e2cf583afc8a592a2ad5e894c834cfd51b141521ada8b4b06534658d05785f4fb128bdb174c59302f6bb6052e731b8e95379c61b96fdf0aa53d00adae078b992ab06b673795e56b765a817187ffe0061d2bb7df2b7d3dfc8ba2a28b297db4ffa77ebb8d056ad23c29eb7a9f0902441db2dcd1f554c210e481e2dcc675be2b92f7324a7d6e8ca8372b0029e9891f1c7715e0388383e715d9fb5fb90dc00385c2c5cb896485ae26fa94f6e6d84e4d695009b2bd76e8bf42e88120d0e587671913979b1a0c26cb27164e272ee6aa1f97f3bb9ee28596f5eb514a536612eea13327809b3b3b975d711750df2abf6b7729edf89cafe716b1848909a46b4a34cf70469703e9c7dae9f42a9dc48560a6a5a6ade6c5df347508fc204bf32fb881bc17de6efc21d7641cd7fb6343157ce1f0971c32b35fff02972d150e3b8b0ec19ba5ef3ed9b868f8aa02c31194918bae4b42adc83dbfd097943db8b0a5cf69ce71b4c43486659a6d584f963f8e4617ba2bce97703f2154ca0fb6fadb0f21cbb387344aded4b933e35da5991c5d2a090725874ed86038be138e134301227a30ea02e8c48dccd3b6a127c17e97db9bd74276827366e4c6bbcc29db5e4fa521e257a30a4c39a4fac2aa0847c16c6df4dc2e90c8d370988823e34b4062c9a1b63e8362dd523a7eb5ba8956cba2a36f1de0864b24b9e0bccf4ea81fc3cebf34c63889e142c6a50916d052461484d6810894a2cfef3b26bdd197c0f13c663a0186b60af8d1a2a01787dded49771fbed515c52dfe73fb5fccf1296bd65b9ed8ecfa7023099cbe16aa8ce39599dced5e4caf03e2d644f15efa82c46d958ff828863ce76432513a94d384d90fa6665320b29455a06fa7338eb2257b16d6b334014a129e7001104154d074e12e8958665015fe2c929fd19e39dad3fc11ab45e18dadf42454c734966468f9c9e5f122c6af3a135ddd46dc244a3801c9e859c0b2f9a2b91d3faccffea3e20a68bc4f34efea79fb58194b0c84bfe431754860543729bab94701b3c9823301d94c94e8222901fbc425110b572d439fd200c4ff5115b71c33f973508177afd35835a1ddac8556b2147ba84b73bbae73296add7b9697aa32720a4f394d3cc93403532929eb9b51ab4d4dc2150bcbfb0639a04b6d9b92b53c7c4e1bc5371e2fa20851e261c632cb183baf2687ca34f458c021324cd6244c0aaa0a1ca12e36d05aa3088791ce1f42fd193a717787ada727d78d700e10a4684fa8e075fa9f8403deba4842fda365fe62a1c728e2688462467af99bd913b7334868c6add07d6a7227d41cf4f6a780658410345bd9ce4e05843032d70cba2fb9115960f6305ccf2381f667848793b62acd77fb2165b72f05dd6a62156ea7730e5780</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">猜一猜？</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>6.s081</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Llama_factory部署踩坑之旅</title>
    <link href="/2024/11/27/Llama-factory%E9%83%A8%E7%BD%B2%E8%B8%A9%E5%9D%91%E4%B9%8B%E6%97%85/"/>
    <url>/2024/11/27/Llama-factory%E9%83%A8%E7%BD%B2%E8%B8%A9%E5%9D%91%E4%B9%8B%E6%97%85/</url>
    
    <content type="html"><![CDATA[<p>记录一个很巧的报错，说来也巧，2024.11.18和同门在新机器上部署代码跑模型，早上在我工位电脑远程成功跑起模型，由于工作需要先在我电脑终止，下午在同门笔记本远程连接后同样的conda环境和路径命令跑不了了。重新创建conda环境拉取代码后一直报一个typo模块缺失的错，手动安装并永久添加到系统环境也无法解决，但是在吃饭的两个小时时间段有人提了一模一样的issue,第一反应是问同门是否是他提的</p><h2 id="No-module-named-‘tyro’"><a href="#No-module-named-‘tyro’" class="headerlink" title="No module named ‘tyro’"></a>No module named ‘tyro’</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ruby">(llama_factory) liujiayao_20240823_91<span class="hljs-variable">@dase314cxl</span><span class="hljs-symbol">:~/LLaMA-Factory-main</span><span class="hljs-variable">$ </span>python -c <span class="hljs-string">&quot;import tyro; print(tyro.__version__)&quot;</span><br><span class="hljs-title class_">Traceback</span> (most recent call last):<br>  <span class="hljs-title class_">File</span> <span class="hljs-string">&quot;&lt;string&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;<span class="hljs-keyword">module</span>&gt;<br><span class="hljs-title class_">ModuleNotFoundError</span>: <span class="hljs-title class_">No</span> <span class="hljs-keyword">module</span> named <span class="hljs-string">&#x27;tyro&#x27;</span><br></code></pre></td></tr></table></figure><p>解决：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">pip</span> install tyro==<span class="hljs-number">0</span>.<span class="hljs-number">8</span>.<span class="hljs-number">14</span><br></code></pre></td></tr></table></figure><p><a href="uri"></a><a href="https://github.com/hiyouga/LLaMA-Factory/issues/6060">https://github.com/hiyouga/LLaMA-Factory/issues/6060</a></p><h2 id="version-GLIBCXX-3-4-32’-not-found"><a href="#version-GLIBCXX-3-4-32’-not-found" class="headerlink" title="version GLIBCXX_3.4.32’ not found"></a>version GLIBCXX_3.4.32’ not found</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">[rank0]: ImportError: <span class="hljs-regexp">/home/</span>liujiayao_20240823_91<span class="hljs-regexp">/miniconda3/</span>envs<span class="hljs-regexp">/llama_factory/</span>bin<span class="hljs-regexp">/../</span>lib<span class="hljs-regexp">/libstdc++.so.6: version GLIBCXX_3.4.32&#x27; not found (required by /</span>home<span class="hljs-regexp">/liujiayao_20240823_91/</span>.cache<span class="hljs-regexp">/torch_extensions/</span>py310_cu124<span class="hljs-regexp">/cpu_adam/</span>cpu_adam.so)<br></code></pre></td></tr></table></figure><p>解决方案很多，因不想降低scipy的版最终通过在对应conda环境通过 conda install -c conda-forge gcc 来解决。<br><a href="uri"></a><a href="https://zhuanlan.zhihu.com/p/637165718?utm_medium=social&utm_psn=1842275695461552129&utm_source=wechat_session">https://zhuanlan.zhihu.com/p/637165718?utm_medium=social&amp;utm_psn=1842275695461552129&amp;utm_source=wechat_session</a><br>可能有用的教程：<br><a href="uri"></a><a href="https://stackoverflow.com/questions/76974555/glibcxx-3-4-32-not-found-error-at-runtime-gcc-13-2-0">https://stackoverflow.com/questions/76974555/glibcxx-3-4-32-not-found-error-at-runtime-gcc-13-2-0</a><br><a href="uri"></a><a href="https://zhuanlan.zhihu.com/p/685165815">https://zhuanlan.zhihu.com/p/685165815</a><br><a href="uri"></a><a href="https://zhuanlan.zhihu.com/p/142718039">https://zhuanlan.zhihu.com/p/142718039</a></p><h3 id="pip速度太慢"><a href="#pip速度太慢" class="headerlink" title="pip速度太慢"></a>pip速度太慢</h3><p>临时使用清华镜像</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">pip install 包名 -<span class="hljs-selector-tag">i</span> https:<span class="hljs-comment">//pypi.tuna.tsinghua.edu.cn/simple</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Llama_factory</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>deepspeed/runtime/engine.py</title>
    <link href="/2024/11/27/deepspeed-runtime-engine-py/"/>
    <url>/2024/11/27/deepspeed-runtime-engine-py/</url>
    
    <content type="html"><![CDATA[<h2 id="确定检查点保存的配置"><a href="#确定检查点保存的配置" class="headerlink" title="确定检查点保存的配置"></a>确定检查点保存的配置</h2><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs lasso">def _save_checkpoint(<span class="hljs-built_in">self</span>, save_dir, <span class="hljs-built_in">tag</span>, client_state=&#123;&#125;, exclude_frozen_parameters=<span class="hljs-literal">False</span>):<br><br>       save_path = <span class="hljs-built_in">self</span>._get_ckpt_name(save_dir, <span class="hljs-built_in">tag</span>)<br><br>       zero_optimizer_state = <span class="hljs-built_in">self</span>.zero_optimization() <span class="hljs-literal">or</span> <span class="hljs-built_in">self</span>.bfloat16_enabled()<br><br>       save_frozen_param = <span class="hljs-built_in">self</span>.zero_optimization_partition_gradients() <span class="hljs-literal">and</span> <span class="hljs-literal">not</span> exclude_frozen_parameters<br><br></code></pre></td></tr></table></figure><ul><li>**save_path &#x3D; self._get_ckpt_name(save_dir, tag)**根据save_dir和tag生成完整的检查点保存路径。</li><li>**zero_optimizer_state &#x3D; self.zero_optimization() or self.bfloat16_enabled()**若启用 Zero Optimization 或 bfloat16，则需要保存优化器状态。</li><li><strong>save_frozen_param:</strong> 若启用 Zero Optimization 的梯度分区 且未排除冻结参数，则需要保存冻结参数。</li></ul><h2 id="收集模型的当前状态"><a href="#收集模型的当前状态" class="headerlink" title="收集模型的当前状态"></a>收集模型的当前状态</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-variable language_">self</span>._curr_ckpt_path = os.path.join(save_dir, tag)<br>      module = <span class="hljs-variable language_">self</span>.module_state_dict(exclude_frozen_parameters=exclude_frozen_parameters)<br>      <span class="hljs-variable language_">self</span>._curr_ckpt_path = <span class="hljs-literal">None</span><br>      state = <span class="hljs-built_in">dict</span>(module=module,<br>                   buffer_names=<span class="hljs-variable language_">self</span>._get_buffer_names(),<br>                   optimizer=<span class="hljs-variable language_">self</span>.optimizer.state_dict() <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.optimizer <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> zero_optimizer_state <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,<br>                   param_shapes=<span class="hljs-variable language_">self</span>._get_zero_param_shapes() <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.optimizer <span class="hljs-keyword">and</span> zero_optimizer_state <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,<br>                   frozen_param_shapes=<span class="hljs-variable language_">self</span>._get_zero_frozen_param_attributes(<span class="hljs-variable language_">self</span>._get_param_shape_func)<br>                   <span class="hljs-keyword">if</span> save_frozen_param <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,<br>                   shared_params=<span class="hljs-variable language_">self</span>._get_shared_params() <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.optimizer <span class="hljs-keyword">and</span> zero_optimizer_state <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,<br>                   frozen_param_fragments=<span class="hljs-variable language_">self</span>._get_zero_frozen_param_attributes(<span class="hljs-variable language_">self</span>._get_param_fragment_func)<br>                   <span class="hljs-keyword">if</span> save_frozen_param <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,<br>                   lr_scheduler=<span class="hljs-variable language_">self</span>.lr_scheduler.state_dict() <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.lr_scheduler <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,<br>                   data_sampler=<span class="hljs-variable language_">self</span>.training_dataloader.data_sampler.state_dict() <span class="hljs-keyword">if</span><br>                   (<span class="hljs-variable language_">self</span>.training_dataloader <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> <span class="hljs-variable language_">self</span>.curriculum_learning_enabled()) <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,<br>                   random_ltd=<span class="hljs-variable language_">self</span>.random_ltd_scheduler.state_dict() <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.random_ltd_enabled() <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,<br>                   sparse_tensor_module_names=<span class="hljs-variable language_">self</span>.sparse_tensor_module_names,<br>                   skipped_steps=<span class="hljs-variable language_">self</span>.skipped_steps,<br>                   global_steps=<span class="hljs-variable language_">self</span>.global_steps,<br>                   global_samples=<span class="hljs-variable language_">self</span>.global_samples,<br>                   dp_world_size=<span class="hljs-variable language_">self</span>.seq_dp_world_size,<br>                   mp_world_size=<span class="hljs-variable language_">self</span>.mp_world_size,<br>                   ds_config=<span class="hljs-variable language_">self</span>.config,<br>                   ds_version=version)<br>      state.update(client_state)<br></code></pre></td></tr></table></figure><p>在使用 Pipeline Parallelism（流水线并行） 的训练模式时，<br>默认行为被重写，导致直接调用 module_state_dict() 返回 None，因为在流水线并行训练模式下，各个模块可能并没有直接获取到完整的状态数据。在调用 module_state_dict() 之前，临时设置一个保存路径变量 self._curr_ckpt_path。<br>PipelineEngine 的 module_state_dict() 实现会检查 <strong>self._curr_ckpt_path</strong> 是否存在，并利用它作为保存路径。<br>在完成 module_state_dict() 的调用之后，将 self._curr_ckpt_path 重置为 None，以免影响其他模块的逻辑。</p><ul><li>**self._curr_ckpt_path &#x3D; os.path.join(save_dir, tag)**将检查点保存路径设置为 save_dir 和 tag 的组合路径。 这是为了解决流水线并行模式下 module_state_dict() 依赖 self._curr_ckpt_path 的问题，确保其能够正确返回模型状态字典。</li><li><strong>module &#x3D; self.module_state_dict</strong>(exclude_frozen_parameters&#x3D;exclude_frozen_parameters)调用 module_state_dict: 获取模型的状态字典。参数 exclude_frozen_parameters 用于指定是否排除冻结参数（例如固定不更新的权重）。</li><li><strong>self._curr_ckpt_path &#x3D; None</strong> 将 self._curr_ckpt_path 重置为 None，恢复初始状态。</li><li>**state &#x3D; dict()**构造一个字典 state，保存与模型和训练相关的各种状态信息：<br><strong>module</strong>: 模型的状态字典，由 module_state_dict 提供。<br>buffer_names: 模型中所有 buffer 的名称，调用 _get_buffer_names() 获取。<br><strong>optimizer</strong>: 优化器状态，通过 self.optimizer.state_dict() 提取。仅在启用了优化器且不使用 zero_optimizer_state 时保存。<br><strong>param_shapes</strong>: 参数形状。仅在启用 zero_optimizer_state 时保存，调用 _get_zero_param_shapes()。<br><strong>frozen_param_shapes</strong>: 冻结参数的形状。仅在启用 save_frozen_param 时保存，调用 _get_zero_frozen_param_attributes(self._get_param_shape_func)。<br><strong>shared_params</strong>: 共享参数信息，调用 _get_shared_params()。<br><strong>frozen_param_fragments</strong>: 冻结参数片段。类似于冻结参数形状，但数据片段级别，调用 _get_zero_frozen_param_attributes(self._get_param_fragment_func)。<br><strong>lr_scheduler</strong>: 学习率调度器状态字典，由 self.lr_scheduler.state_dict() 提供。<br><strong>data_sampler</strong>: 数据采样器状态字典。如果启用了课程学习（curriculum_learning_enabled()）并且有训练数据加载器，则调用 self.training_dataloader.data_sampler.state_dict()。<br><strong>random_ltd</strong>: 随机 LTD 调度器状态字典（用于随机剪枝或模型压缩），通过 <strong>self.random_ltd_scheduler.state_dict()</strong> 获取。<br><strong>sparse_tensor_module_names</strong>: 稀疏张量模块的名称。<br><strong>skipped_steps</strong>: 当前训练中跳过的步骤数。<br><strong>global_steps</strong>: 全局训练步数。<br><strong>global_samples</strong>: 全局训练样本数。<br><strong>dp_world_size</strong>: 数据并行的全局工作大小。<br><strong>mp_world_size</strong>: 模型并行的全局工作大小。<br><strong>ds_config</strong>: DeepSpeed 的配置。<br><strong>ds_version</strong>: DeepSpeed 的版本信息。</li><li>**state.update(client_state)**将外部传入的 client_state 添加到 state 字典中，扩展其内容。</li></ul><h2 id="处理冻结参数形状"><a href="#处理冻结参数形状" class="headerlink" title="处理冻结参数形状"></a>处理冻结参数形状</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">frozen_param_shapes = state<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;frozen_param_shapes&#x27;</span>]</span><br>       frozen_param_shapes_str = <span class="hljs-built_in">str</span>(frozen_param_shapes)<br>       frozen_param_shapes_dict = &#123;key: <span class="hljs-built_in">list</span>(value) <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(value, torch.Size) <span class="hljs-keyword">else</span> value<span class="hljs-selector-class">.tolist</span>() <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> frozen_param_shapes<span class="hljs-selector-class">.items</span>()&#125;<br><br></code></pre></td></tr></table></figure><ul><li><strong>frozen_param_shapes &#x3D; state[‘frozen_param_shapes’]</strong><br>**frozen_param_shapes_str &#x3D; str(frozen_param_shapes)**提取冻结参数的形状信息，并转换为字符串格式以便后续处理。</li><li><strong>frozen_param_shapes_dict</strong> &#x3D; {<br>  key: list(value) if isinstance(value, torch.Size) else value.tolist()<br>  for key, value in frozen_param_shapes.items()<br>}遍历字典中的每个键值对将 frozen_param_shapes 中的内容格式化为适合保存为 JSON 文件的形式。<br>如果是 <strong>torch.Size</strong>类型(torch.Size 是 PyTorch 中表示张量形状的类，但它是不可直接序列化为 JSON 的)调用 <strong>list(value)</strong> 将其转换为 Python 的列表（如 (3, 4) 转为 [3, 4]）,张量（torch.Tensor）也不可直接序列化为 JSON。调用 <strong>.tolist()</strong> 将张量内容转换为 Python 的列表。<br>例如，形如 torch.tensor([1, 2, 3]) 会转换为 [1, 2, 3]。</li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li><strong>确定检查点保存的配置</strong>：包括路径、状态和所需部分。<br>确定保存路径：使用 self._get_ckpt_name(save_dir, tag) 方法生成保存路径 save_path。<br>确定保存状态：zero_optimizer_state：是否保存优化器的非零状态（由 Zero Optimization 和 bfloat16 支持决定）。save_frozen_param：是否保存冻结参数状态（需要 Zero Optimization 的分区梯度功能并且没有排除冻结参数）。</li><li><strong>收集模型的当前状态</strong>：构建保存字典（state）<br>保存模块状态：通过设置 self._curr_ckpt_path，解决 Pipeline Parallelism 中 module_state_dict() 的路径依赖问题，获取模块状态。<br>构建状态字典 (**state)**：包含模型和训练相关的多种状态：<br>模型权重（module），优化器状态（optimizer），参数形状（param_shapes）<br>冻结参数形状及片段（frozen_param_shapes 和 frozen_param_fragments），学习率调度器状态（lr_scheduler），数据采样器状态（data_sampler）<br>随机梯度裁剪（random_ltd），其它全局状态（例如步数、样本数、配置等）</li><li><strong>处理冻结参数形状</strong>：将 frozen_param_shapes 转换为字典格式（从 torch.Size 转为列表）。</li><li><strong>完整保存检查点</strong>：用于模型后续的加载和恢复。</li></ul><h2 id="frozen-param-shapes"><a href="#frozen-param-shapes" class="headerlink" title="frozen_param_shapes"></a>frozen_param_shapes</h2><p><strong>目的</strong>:遍历模型的参数，检查哪些参数是冻结的（即不需要梯度更新的），并统计它们分布在 CPU 和 GPU 上的数量，同时通过给定的 attr_func 获取每个冻结参数的属性。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_zero_frozen_param_attributes</span>(<span class="hljs-params">self, attr_func</span>):<br>        frozen_param_fragments = OrderedDict()<br>        cpu = <span class="hljs-number">0</span><br>        gpu = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.module.parameters():<br>            <span class="hljs-keyword">if</span> param.requires_grad:<br>                <span class="hljs-keyword">continue</span><br>            <span class="hljs-keyword">if</span> param <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.param_names:<br>                <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f&quot;failed to find frozen <span class="hljs-subst">&#123;param&#125;</span> in named params&quot;</span>)<br>            name = <span class="hljs-variable language_">self</span>.param_names[param]<br>            <span class="hljs-comment">#pdb.set_trace()</span><br>            <br>            <span class="hljs-keyword">if</span> param.ds_tensor.device == torch.device(<span class="hljs-string">&#x27;cpu&#x27;</span>):<br>                cpu+=<span class="hljs-number">1</span><br>               <span class="hljs-comment"># print(f&quot;Device of param &#123;param&#125;: &#123;param.ds_tensor.device&#125;&quot;)</span><br>            <span class="hljs-keyword">else</span> :<br>                pdb.set_trace()<br>                gpu+=<span class="hljs-number">1</span><br>                <span class="hljs-comment">#print(param.ds_tensor.device)</span><br><br>            frozen_param_fragments[name] = attr_func(param)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;cpu次数: <span class="hljs-subst">&#123;cpu&#125;</span>&quot;</span>) <br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;gpu次数: <span class="hljs-subst">&#123;gpu&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> frozen_param_fragments<br></code></pre></td></tr></table></figure><ul><li><strong>frozen_param_fragments</strong>：存储冻结参数及其通过 attr_func 提取的属性，使用 OrderedDict 按插入顺序存储键值对。</li><li><strong>for param in self.module.parameters()</strong>:遍历模型中所有的参数。</li><li><strong>if param.requires_grad:continue</strong> 这里param.requires_grad&#x3D;True 表示该参数是可训练的，即需要进行梯度更新，因此跳过这些参数，只处理冻结的参数（requires_grad&#x3D;False）。</li><li><strong>if param not in self.param_names:</strong> param 必须在 self.param_names 中有对应的名称。如果没有找到，抛出一个 ValueError 错误，表示无法找到该参数的名称。</li><li><strong>name &#x3D; self.param_names[param]</strong>:获取冻结参数的名称，存储在 name 变量中。这个名称通常用于在 frozen_param_fragments 字典中标识每个参数。</li><li>if param.ds_tensor.device &#x3D;&#x3D; torch.device(‘cpu’):<br>  cpu +&#x3D; 1<br>else:<br>  gpu +&#x3D; 1区分 CPU 和 GPU 中的冻结参数，并分别统计它们的数量。</li><li>**frozen_param_fragments[name] &#x3D; attr_func(param)**：对每个冻结参数，调用 attr_func(param) 来获取其相关属性，并将该属性存储在 frozen_param_fragments 字典中。字典的键是参数的名称 name，值是通过 attr_func 获取的属性。</li></ul><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><ol><li><strong>初始化数据结构</strong>：创建存储冻结参数的字典 frozen_param_fragments 和设备计数器 cpu、gpu。</li><li><strong>遍历模型参数</strong>：遍历模型中所有的参数，筛选出冻结参数。检查参数名称：确保冻结参数在 self.param_names 中有对应的名称。</li><li><strong>统计设备信息</strong>：判断冻结参数所在的设备，并统计 CPU 和 GPU 上冻结参数的数量。提取属性：通过调用 attr_func 提取冻结参数的属性。</li><li><strong>打印统计信息</strong>：打印 CPU 和 GPU 上冻结参数的数量。</li><li><strong>返回结果</strong>：返回包含冻结参数名称和属性的字典。</li></ol>]]></content>
    
    
    <categories>
      
      <category>Llama_factory</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>pdb启动微调</title>
    <link href="/2024/11/27/pdb%E5%90%AF%E5%8A%A8%E5%BE%AE%E8%B0%83-1/"/>
    <url>/2024/11/27/pdb%E5%90%AF%E5%8A%A8%E5%BE%AE%E8%B0%83-1/</url>
    
    <content type="html"><![CDATA[<h2 id="245机器上启动pdb微调："><a href="#245机器上启动pdb微调：" class="headerlink" title="245机器上启动pdb微调："></a>245机器上启动pdb微调：</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">conda activate llama_factory<br>cd Downloads/LLaMA-Factory/<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">FORCE_TORCHRUN</span>=1<br></code></pre></td></tr></table></figure><ul><li><strong>pdb：</strong></li></ul><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">CUDA_VISIBLE_DEVICES=1 python3 -m pdb $<span class="hljs-params">(which llamafactory-cli)</span> train     <span class="hljs-params">--stage</span> sft     <span class="hljs-params">--do_train</span>     <span class="hljs-params">--model_name_or_path</span> <span class="hljs-string">/home/dell/sdb/.cache/Qwen2-0___5B-Instruct</span>     <span class="hljs-params">--dataset</span> identity     <span class="hljs-params">--dataset_dir</span> <span class="hljs-string">./data</span>     <span class="hljs-params">--template</span> qwen     <span class="hljs-params">--finetuning_type</span> freeze     <span class="hljs-params">--output_dir</span> <span class="hljs-string">/home/dell/sdb/saves/Qwen2-0___5B-Instruct/freeze/sft</span>     <span class="hljs-params">--overwrite_cache</span>     <span class="hljs-params">--overwrite_output_dir</span>     <span class="hljs-params">--cutoff_len</span> 1024     <span class="hljs-params">--preprocessing_num_workers</span> 16     <span class="hljs-params">--per_device_train_batch_size</span> 2     <span class="hljs-params">--per_device_eval_batch_size</span> 1     <span class="hljs-params">--gradient_accumulation_steps</span> 8     <span class="hljs-params">--lr_scheduler_type</span> cosine     <span class="hljs-params">--logging_steps</span> 50     <span class="hljs-params">--warmup_steps</span> 20     <span class="hljs-params">--save_steps</span> 100     <span class="hljs-params">--eval_steps</span> 50     <span class="hljs-params">--evaluation_strategy</span> steps     <span class="hljs-params">--load_best_model_at_end</span>     <span class="hljs-params">--learning_rate</span> 5e-5     <span class="hljs-params">--num_train_epochs</span> 5.0     <span class="hljs-params">--max_samples</span> 1000     <span class="hljs-params">--val_size</span> 0.1     <span class="hljs-params">--plot_loss</span>     <span class="hljs-params">--fp16</span>     <span class="hljs-params">--deepspeed</span> examples/deepspeed/ds_z3_offload_config.json<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>检查点存储流程</title>
    <link href="/2024/11/27/%E6%A3%80%E6%9F%A5%E7%82%B9%E5%AD%98%E5%82%A8%E6%B5%81%E7%A8%8B/"/>
    <url>/2024/11/27/%E6%A3%80%E6%9F%A5%E7%82%B9%E5%AD%98%E5%82%A8%E6%B5%81%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="保存checkpoint日志解析"><a href="#保存checkpoint日志解析" class="headerlink" title="保存checkpoint日志解析"></a>保存checkpoint日志解析</h1><ul><li><strong>保存检查点开始</strong><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-21</span> <span class="hljs-number">10</span>:<span class="hljs-number">18</span>:<span class="hljs-number">54</span>,<span class="hljs-number">402</span> &gt;&gt; Saving model <span class="hljs-keyword">checkpoint</span> <span class="hljs-keyword">to</span> /home/dell/sdb/saves/Qwen2<span class="hljs-number">-0</span>___5B-Instruct/<span class="hljs-keyword">freeze</span>/sft/<span class="hljs-keyword">checkpoint</span><span class="hljs-number">-25</span><br></code></pre></td></tr></table></figure>模型检查点将被保存到指定路径 &#x2F;home&#x2F;dell&#x2F;sdb&#x2F;saves&#x2F;Qwen2-0___5B-Instruct&#x2F;freeze&#x2F;sft&#x2F;checkpoint-25，代表训练中的第25次迭代或某个训练进度标志。</li><li>保存配置文件<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[<span class="hljs-keyword">INFO</span>|configuration_utils.py:<span class="hljs-number">472</span>] <span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-21</span> <span class="hljs-number">10</span>:<span class="hljs-number">18</span>:<span class="hljs-number">54</span>,<span class="hljs-number">406</span> &gt;&gt; <span class="hljs-keyword">Configuration</span> saved <span class="hljs-keyword">in</span> /home/dell/sdb/saves/Qwen2<span class="hljs-number">-0</span>___5B-Instruct/<span class="hljs-keyword">freeze</span>/sft/<span class="hljs-keyword">checkpoint</span><span class="hljs-number">-25</span>/config.json<br>[<span class="hljs-keyword">INFO</span>|configuration_utils.py:<span class="hljs-number">807</span>] <span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-21</span> <span class="hljs-number">10</span>:<span class="hljs-number">18</span>:<span class="hljs-number">54</span>,<span class="hljs-number">406</span> &gt;&gt; <span class="hljs-keyword">Configuration</span> saved <span class="hljs-keyword">in</span> /home/dell/sdb/saves/Qwen2<span class="hljs-number">-0</span>___5B-Instruct/<span class="hljs-keyword">freeze</span>/sft/<span class="hljs-keyword">checkpoint</span><span class="hljs-number">-25</span>/generation_config.json<br></code></pre></td></tr></table></figure>config.json 和 generation_config.json 分别保存模型的基础配置和生成参数配置，确保模型加载时可以正确重现训练环境。</li><li>保存模型权重文件</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[<span class="hljs-keyword">INFO</span>|modeling_utils.py:<span class="hljs-number">2766</span>] <span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-21</span> <span class="hljs-number">10</span>:<span class="hljs-number">19</span>:<span class="hljs-number">00</span>,<span class="hljs-number">213</span> &gt;&gt; Model weights saved <span class="hljs-keyword">in</span> /home/dell/sdb/saves/Qwen2<span class="hljs-number">-0</span>___5B-Instruct/<span class="hljs-keyword">freeze</span>/sft/<span class="hljs-keyword">checkpoint</span><span class="hljs-number">-25</span>/model.safetensors<br></code></pre></td></tr></table></figure><p>权重文件保存为 model.safetensors 格式。</p><ul><li>保存分词器文件</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[<span class="hljs-keyword">INFO</span>|tokenization_utils_base.py:<span class="hljs-number">2702</span>] <span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-21</span> <span class="hljs-number">10</span>:<span class="hljs-number">19</span>:<span class="hljs-number">00</span>,<span class="hljs-number">214</span> &gt;&gt; tokenizer config file saved <span class="hljs-keyword">in</span> /home/dell/sdb/saves/Qwen2<span class="hljs-number">-0</span>___5B-Instruct/<span class="hljs-keyword">freeze</span>/sft/<span class="hljs-keyword">checkpoint</span><span class="hljs-number">-25</span>/tokenizer_config.json<br>[<span class="hljs-keyword">INFO</span>|tokenization_utils_base.py:<span class="hljs-number">2711</span>] <span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-21</span> <span class="hljs-number">10</span>:<span class="hljs-number">19</span>:<span class="hljs-number">00</span>,<span class="hljs-number">214</span> &gt;&gt; Special tokens file saved <span class="hljs-keyword">in</span> /home/dell/sdb/saves/Qwen2<span class="hljs-number">-0</span>___5B-Instruct/<span class="hljs-keyword">freeze</span>/sft/<span class="hljs-keyword">checkpoint</span><span class="hljs-number">-25</span>/special_tokens_map.json<br></code></pre></td></tr></table></figure><p>tokenizer_config.json：分词器的配置信息。<br>special_tokens_map.json：保存特殊 token（如 pad_token、cls_token 等）的映射关系。</p><h2 id="保存-DeepSpeed-检查点"><a href="#保存-DeepSpeed-检查点" class="headerlink" title="保存 DeepSpeed 检查点"></a>保存 DeepSpeed 检查点</h2><ul><li>记录全局步骤的检查点信息</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[<span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-21</span> <span class="hljs-number">10</span>:<span class="hljs-number">20</span>:<span class="hljs-number">31</span>,<span class="hljs-number">627</span>] [<span class="hljs-keyword">INFO</span>] [logging.py:<span class="hljs-number">96</span>:log_dist] [Rank <span class="hljs-number">0</span>] [Torch] <span class="hljs-keyword">Checkpoint</span> global_step25 <span class="hljs-keyword">is</span> about <span class="hljs-keyword">to</span> be saved!<br><br></code></pre></td></tr></table></figure><p>global_step25 代表训练到第 25 个全局步骤的状态。</p><ul><li>保存零冗余优化器的检查点文件<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[<span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-21</span> <span class="hljs-number">10</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>,<span class="hljs-number">574</span>] [<span class="hljs-keyword">INFO</span>] [logging.py:<span class="hljs-number">96</span>:log_dist] [Rank <span class="hljs-number">0</span>] Saving model <span class="hljs-keyword">checkpoint</span>: /home/dell/sdb/saves/Qwen2<span class="hljs-number">-0</span>___5B-Instruct/<span class="hljs-keyword">freeze</span>/sft/<span class="hljs-keyword">checkpoint</span><span class="hljs-number">-25</span>/global_step25/zero_pp_rank_0_mp_rank_00_model_states.pt<br></code></pre></td></tr></table></figure>zero_pp_rank_0_mp_rank_00_model_states.pt：保存当前模型状态，用于零冗余优化（ZeRO）的分布式训练。</li></ul><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs prolog">[<span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-21</span> <span class="hljs-number">10</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>,<span class="hljs-number">575</span>] [<span class="hljs-symbol">INFO</span>] [torch_checkpoint_engine.py:<span class="hljs-number">21</span>:save] [<span class="hljs-symbol">Torch</span>] <span class="hljs-symbol">Saving</span> ...<br>[<span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-21</span> <span class="hljs-number">10</span>:<span class="hljs-number">26</span>:<span class="hljs-number">56</span>,<span class="hljs-number">161</span>] [<span class="hljs-symbol">INFO</span>] [torch_checkpoint_engine.py:<span class="hljs-number">23</span>:save] [<span class="hljs-symbol">Torch</span>] <span class="hljs-symbol">Saved</span> ...<br></code></pre></td></tr></table></figure><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">[<span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-21</span> <span class="hljs-number">10</span>:<span class="hljs-number">27</span>:<span class="hljs-number">11</span>,<span class="hljs-number">351</span>] [<span class="hljs-symbol">INFO</span>] [torch_checkpoint_engine.py:<span class="hljs-number">23</span>:save] [<span class="hljs-symbol">Torch</span>] <span class="hljs-symbol">Saved</span> .../zero_pp_rank_0_mp_rank_00_optim_states.pt.<br></code></pre></td></tr></table></figure><p>zero_pp_rank_0_mp_rank_00_optim_states.pt 保存优化器状态，保证恢复训练时可以正确加载优化器的参数。</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7"><span class="hljs-comment">[2024-11-21 10:27:11,369]</span> <span class="hljs-comment">[INFO]</span> <span class="hljs-comment">[engine.py:3589:_save_zero_checkpoint]</span> zero checkpoint saved ...<br><span class="hljs-comment">[2024-11-21 10:27:11,369]</span> <span class="hljs-comment">[INFO]</span> <span class="hljs-comment">[torch_checkpoint_engine.py:33:commit]</span> <span class="hljs-comment">[Torch]</span> Checkpoint global_step25 <span class="hljs-keyword">is</span> ready now!<br><br></code></pre></td></tr></table></figure><p>所有文件均保存完成，检查点 global_step25 可以正常使用。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><strong>DeepSpeed 和 PyTorch 结合使用，完整的检查点保存流程</strong>：</p><ol><li>模型参数（权重）</li><li>优化器状态</li><li>配置文件</li><li>特殊辅助文件（如冻结参数形状和分词器信息）</li></ol><h1 id="transformers-trainer-py"><a href="#transformers-trainer-py" class="headerlink" title="transformers&#x2F;trainer.py"></a>transformers&#x2F;trainer.py</h1><h2 id="核心逻辑"><a href="#核心逻辑" class="headerlink" title="核心逻辑"></a>核心逻辑</h2><p>在分布式训练中，多个进程通常会并行运行，为了避免重复保存检查点（例如由每个进程都保存一次），通常只有主进程（通常称为 rank 0 或“进程 0”）负责保存检查点。<br>如果该函数运行到了这一步，说明调用者已经确保此代码只会在进程 0 上执行。因此，无需在此处再次检查是否为主进程。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_save</span>(<span class="hljs-params">self, output_dir: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span>, state_dict=<span class="hljs-literal">None</span></span>):<br>       output_dir = output_dir <span class="hljs-keyword">if</span> output_dir <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> <span class="hljs-variable language_">self</span>.args.output_dir<br>       os.makedirs(output_dir, exist_ok=<span class="hljs-literal">True</span>)<br>       logger.info(<span class="hljs-string">f&quot;Saving model checkpoint to <span class="hljs-subst">&#123;output_dir&#125;</span>&quot;</span>)<br>       <span class="hljs-comment"># 确定支持的模型类型</span><br>       supported_classes = (PreTrainedModel,) <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> is_peft_available() <span class="hljs-keyword">else</span> (PreTrainedModel, PeftModel)<br><br>       <span class="hljs-comment"># 模型不是支持的类型,state_dict：获取模型参数的状态字典，用于保存权重。</span><br>       <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(<span class="hljs-variable language_">self</span>.model, supported_classes):<br>           <span class="hljs-keyword">if</span> state_dict <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>               state_dict = <span class="hljs-variable language_">self</span>.model.state_dict()<br>       <span class="hljs-comment"># 如果通过 self.accelerator.unwrap_model 解包后的模型属于支持的类：调用 save_pretrained() 方法保存模型到 output_dir，并传入 state_dict 和 safe_serialization 参数。</span><br>           <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(<span class="hljs-variable language_">self</span>.accelerator.unwrap_model(<span class="hljs-variable language_">self</span>.model), supported_classes):<br>               <span class="hljs-variable language_">self</span>.accelerator.unwrap_model(<span class="hljs-variable language_">self</span>.model).save_pretrained(<br>                   output_dir, state_dict=state_dict, safe_serialization=<span class="hljs-variable language_">self</span>.args.save_safetensors<br>               )<br>            <span class="hljs-comment"># 如果解包后的模型仍然不属于支持的类：记录日志：只保存模型state_dict</span><br>           <span class="hljs-keyword">else</span>:<br>               logger.info(<span class="hljs-string">&quot;Trainer.model is not a `PreTrainedModel`, only saving its state dict.&quot;</span>)<br>               <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.args.save_safetensors:<br>                   safetensors.torch.save_file(<br>                       state_dict, os.path.join(output_dir, SAFE_WEIGHTS_NAME), metadata=&#123;<span class="hljs-string">&quot;format&quot;</span>: <span class="hljs-string">&quot;pt&quot;</span>&#125;<br>                   )<br>               <span class="hljs-keyword">else</span>:<br>                   torch.save(state_dict, os.path.join(output_dir, WEIGHTS_NAME))<br>       <span class="hljs-comment"># 如果 self.model 类型属于支持的类，直接调用 save_pretrained() 保存模型，包括 state_dict 和 safe_serialization 参数。</span><br>       <span class="hljs-keyword">else</span>:<br>           <span class="hljs-variable language_">self</span>.model.save_pretrained(<br>               output_dir, state_dict=state_dict, safe_serialization=<span class="hljs-variable language_">self</span>.args.save_safetensors<br>           )<br>       <span class="hljs-comment">#save_pretrained 是主函数，用于保存分词器的完整状态 </span><br>       <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.tokenizer <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>           <span class="hljs-variable language_">self</span>.tokenizer.save_pretrained(output_dir)<br><br>       <span class="hljs-comment"># 训练参数</span><br>       torch.save(<span class="hljs-variable language_">self</span>.args, os.path.join(output_dir, TRAINING_ARGS_NAME))<br></code></pre></td></tr></table></figure><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p><strong>这段代码的功能是保存训练过程中生成的检查点，包括</strong>：</p><ul><li>模型权重state_dict：获取模型参数的状态字典，用于保存权重。</li><li>模型及其配置保存到指定的目录：self.model.save_pretrained(只有主进程才会保存模型)</li><li>分词器配置：self.tokenizer.save_pretrained(output_dir)，用于保存模型的函数，默认为 torch.save</li><li>训练参数：torch.save</li></ul><h2 id="save-pretrained核心逻辑"><a href="#save-pretrained核心逻辑" class="headerlink" title="save_pretrained核心逻辑"></a>save_pretrained核心逻辑</h2><p><strong>save_pretrained</strong> 函数的核心逻辑是将训练好的模型及其配置保存到指定的目录，方便后续通过 <strong>from_pretrained</strong> 方法重新加载。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># 如果 self.model 类型属于支持的类，直接调用 save_pretrained() 保存模型，包括 state_dict 和 safe_serialization 参数。</span><br>        <span class="hljs-keyword">else</span>:<br>            self.model.save_pretrained(<br>                output_dir, <span class="hljs-attribute">state_dict</span>=state_dict, <span class="hljs-attribute">safe_serialization</span>=self.args.save_safetensors<br>            )<br></code></pre></td></tr></table></figure><h3 id="输入参数"><a href="#输入参数" class="headerlink" title="输入参数"></a>输入参数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">save_pretrained</span>(<span class="hljs-params"></span><br><span class="hljs-params">        self,</span><br><span class="hljs-params">        save_directory: <span class="hljs-type">Union</span>[<span class="hljs-built_in">str</span>, os.PathLike],</span><br><span class="hljs-params">        is_main_process: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span>,</span><br><span class="hljs-params">        state_dict: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">dict</span>] = <span class="hljs-literal">None</span>,</span><br><span class="hljs-params">        <span class="hljs-comment"># 用于保存模型的函数，默认为 torch.save。</span></span><br><span class="hljs-params">        save_function: <span class="hljs-type">Callable</span> = torch.save,</span><br><span class="hljs-params">        push_to_hub: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>,</span><br><span class="hljs-params">        <span class="hljs-comment"># 每个模型检查点的最大大小，超过该大小时将进行分片保存。</span></span><br><span class="hljs-params">        max_shard_size: <span class="hljs-type">Union</span>[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">str</span>] = <span class="hljs-string">&quot;5GB&quot;</span>,</span><br><span class="hljs-params">        <span class="hljs-comment"># 使用 safetensors进行序列化</span></span><br><span class="hljs-params">        safe_serialization: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span>,</span><br><span class="hljs-params">        variant: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span>,</span><br><span class="hljs-params">        token: <span class="hljs-type">Optional</span>[<span class="hljs-type">Union</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">bool</span>]] = <span class="hljs-literal">None</span>,</span><br><span class="hljs-params">        <span class="hljs-comment"># 是否将适配器权重（如果存在）以兼容 PEFT 库的格式保存</span></span><br><span class="hljs-params">        save_peft_format: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span>,</span><br><span class="hljs-params">        **kwargs,</span><br><span class="hljs-params">    </span>):<br></code></pre></td></tr></table></figure><h3 id="offload-的模块进行特殊处理"><a href="#offload-的模块进行特殊处理" class="headerlink" title="offload 的模块进行特殊处理"></a>offload 的模块进行特殊处理</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># for offloaded modules</span><br>       module_map = &#123;&#125;<br><br>       <span class="hljs-comment"># Save the model</span><br>       <span class="hljs-keyword">if</span> state_dict <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>           <span class="hljs-comment"># if any model parameters are offloaded, make module map</span><br>           <span class="hljs-keyword">if</span> (<br>               <span class="hljs-comment"># 检查模型是否有设备映射属性</span><br>               <span class="hljs-built_in">hasattr</span>(<span class="hljs-variable language_">self</span>, <span class="hljs-string">&quot;hf_device_map&quot;</span>) <br>               <span class="hljs-comment"># 确认设备映射到多个设备</span><br>               <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(<span class="hljs-built_in">set</span>(<span class="hljs-variable language_">self</span>.hf_device_map.values())) &gt; <span class="hljs-number">1</span><br>               <span class="hljs-comment"># 判断是否有部分模型参数被 offload（存储到 CPU 或磁盘）。</span><br>               <span class="hljs-keyword">and</span> (<span class="hljs-string">&quot;cpu&quot;</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.hf_device_map.values() <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;disk&quot;</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.hf_device_map.values())<br>           ):<br>           <span class="hljs-comment"># 发出警告，提示用户 CPU 的空闲内存需要大于 shard_size（默认值为 5GB）。</span><br>               warnings.warn(<br>                   <span class="hljs-string">&quot;Attempting to save a model with offloaded modules. Ensure that unallocated cpu memory exceeds the `shard_size` (5GB default)&quot;</span><br>               )<br><br>               <span class="hljs-comment"># 遍历 model_to_save 的所有子模块。named_modules() 方法返回所有模块的名字和模块本身。准备为每个模块提取参数字典（state_dict）。</span><br>               <span class="hljs-keyword">for</span> name, module <span class="hljs-keyword">in</span> model_to_save.named_modules():<br>                   <span class="hljs-keyword">if</span> name == <span class="hljs-string">&quot;&quot;</span>:<br>                       <span class="hljs-keyword">continue</span><br>                   <span class="hljs-comment"># 获取当前模块的参数字典（state_dict）。</span><br>                   module_state_dict = module.state_dict()<br>                   <span class="hljs-comment"># 将模块名和参数名组合，记录到 module_map 中。为每个参数生成唯一的键名：模块名.参数名。在 module_map 中记录键名和模块的对应关系，用于后续加载这些参数。</span><br>                   <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> module_state_dict:<br>                       module_map[name + <span class="hljs-string">f&quot;.<span class="hljs-subst">&#123;key&#125;</span>&quot;</span>] = module<br><br>           <span class="hljs-comment"># 调用 model_to_save 的 state_dict() 方法生成完整的模型参数字典。</span><br>           state_dict = model_to_save.state_dict()<br></code></pre></td></tr></table></figure><p><strong>这部分代码的核心功能是为保存模型时支持 offload 的模块进行特殊处理</strong>：</p><ol><li>检查模型是否包含 offload 到 CPU 或磁盘的参数。</li><li>如果存在 offload 参数，创建 module_map，记录参数与模块的对应关系。</li><li>最后生成完整的 state_dict，用于保存模型。</li></ol><h3 id="分片保存"><a href="#分片保存" class="headerlink" title="分片保存"></a>分片保存</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment"># Save the model</span><br>       filename_to_tensors = state_dict_split.filename_to_tensors.items()<br>       if module_map:<br>           filename_to_tensors = logging.tqdm(filename_to_tensors, desc=<span class="hljs-string">&quot;Saving checkpoint shards&quot;</span>)<br>       for <span class="hljs-keyword">shard_file, </span>tensors in filename_to_tensors:<br>           <span class="hljs-keyword">shard </span>= &#123;tensor: state_dict[tensor] for tensor in tensors&#125;<br>           <span class="hljs-comment"># remake shard with onloaded parameters if necessary</span><br>           if module_map:<br>               if accelerate_version &lt; version.parse(<span class="hljs-string">&quot;0.31&quot;</span>):<br>                   raise ImportError(<br>                       f<span class="hljs-string">&quot;You need accelerate version to be greater or equal than 0.31 to save models with offloaded parameters. Detected version &#123;accelerate_version&#125;. &quot;</span><br>                       f<span class="hljs-string">&quot;Please upgrade accelerate with `pip install -U accelerate`&quot;</span><br>                   )<br>               <span class="hljs-comment"># init state_dict for this shard</span><br>               <span class="hljs-keyword">shard_state_dict </span>= &#123;name: <span class="hljs-string">&quot;&quot;</span> for name in <span class="hljs-keyword">shard&#125;</span><br><span class="hljs-keyword"></span>               for module_name in <span class="hljs-keyword">shard:</span><br><span class="hljs-keyword"></span>                   module = module_map[module_name]<br>                   <span class="hljs-comment"># update state dict with onloaded parameters</span><br>                   <span class="hljs-keyword">shard_state_dict </span>= get_state_dict_from_offload(module, module_name, <span class="hljs-keyword">shard_state_dict)</span><br><span class="hljs-keyword"></span><br>               <span class="hljs-comment"># assign shard to be the completed state dict</span><br>               <span class="hljs-keyword">shard </span>= <span class="hljs-keyword">shard_state_dict</span><br><span class="hljs-keyword"></span>               del <span class="hljs-keyword">shard_state_dict</span><br><span class="hljs-keyword"></span>               gc.collect()<br><br>           if safe_serialization:<br>               <span class="hljs-comment"># At some point we will need to deal better with save_function (used for TPU and other distributed</span><br>               <span class="hljs-comment"># joyfulness), but for now this enough.</span><br>               safe_save_file(<span class="hljs-keyword">shard, </span>os.path.<span class="hljs-keyword">join(save_directory, </span><span class="hljs-keyword">shard_file), </span>metadata=&#123;<span class="hljs-string">&quot;format&quot;</span>: <span class="hljs-string">&quot;pt&quot;</span>&#125;)<br><span class="hljs-symbol">           else:</span><br>               save_function(<span class="hljs-keyword">shard, </span>os.path.<span class="hljs-keyword">join(save_directory, </span><span class="hljs-keyword">shard_file))</span><br><span class="hljs-keyword"></span><br></code></pre></td></tr></table></figure><p><strong>代码核心逻辑概述：</strong></p><ul><li>分片处理：将大模型的参数按需分片保存，减少内存占用。</li><li>设备卸载管理：处理可能被分配到不同设备（如 CPU 或磁盘）的参数，从设备或磁盘加载卸载的参数到内存中，确保能够正确重新加载。</li><li>依赖库校验：确保环境中的库版本满足保存的要求（如 Accelerate 库版本）。</li></ul><h3 id="保存配置"><a href="#保存配置" class="headerlink" title="保存配置"></a>保存配置</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-comment"># Save the config</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-symbol">is_main_process:</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-symbol">_hf_peft_config_loaded:</span><br>                model_to_save.config.save_pretrained(save_directory)<br>            <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.can_generate():<br>                <span class="hljs-comment"># generation config built from the model config + the model config holds generation kwargs -&gt; generate</span><br>                <span class="hljs-comment"># may revert to legacy behavior if the two don&#x27;t match</span><br>                <span class="hljs-keyword">if</span> (<br>                    model_to_save.generation_config._from_model_config<br>                    <span class="hljs-keyword">and</span> model_to_save.config._has_non_default_generation_parameters()<br>                ):<br>                    new_generation_config = <span class="hljs-title class_">GenerationConfig</span>.from_model_config(model_to_save.config)<br>                    <span class="hljs-keyword">if</span> new_generation_config != model_to_save.<span class="hljs-symbol">generation_config:</span><br>                        logger.warning(<br>                            <span class="hljs-string">&quot;Your generation config was originally created from the model config, but the model &quot;</span><br>                            <span class="hljs-string">&quot;config has changed since then. Unless you pass the `generation_config` argument to this &quot;</span><br>                            <span class="hljs-string">&quot;model&#x27;s `generate` calls, they will revert to the legacy behavior where the base &quot;</span><br>                            <span class="hljs-string">&quot;`generate` parameterization is loaded from the model config instead. &quot;</span><br>                            <span class="hljs-string">&quot;To avoid this behavior and this warning, we recommend you to overwrite the generation &quot;</span><br>                            <span class="hljs-string">&quot;config model attribute before calling the model&#x27;s `save_pretrained`, preferably also &quot;</span><br>                            <span class="hljs-string">&quot;removing any generation kwargs from the model config. This warning will be raised to an &quot;</span><br>                            <span class="hljs-string">&quot;exception in v4.41.&quot;</span><br>                        )<br>                model_to_save.generation_config.save_pretrained(save_directory)<br><br></code></pre></td></tr></table></figure><p><strong>总结：</strong></p><ul><li>保存模型配置：如果没有加载 PEFT 配置文件，模型的配置文件会被保存。</li><li>生成配置检查与保存：如果模型支持生成，并且生成配置与模型配置不一致，会生成一个新的生成配置，并保存该配置。如果生成配置发生变化，会发出警告，提醒用户注意生成配置的行为。</li><li>最终，保存模型的<strong>配置文件和生成配置文件</strong>config.json 和 generation_config.json ，以确保模型的完整性和生成能力能够在后续使用中被正确恢复。</li></ul><h1 id="torch-save源码分析"><a href="#torch-save源码分析" class="headerlink" title="torch.save源码分析"></a>torch.save源码分析</h1><p>在大模型训练中checkpoint的存储流程在&#x2F;home&#x2F;dell&#x2F;anaconda3&#x2F;envs&#x2F;llama_factory&#x2F;lib&#x2F;python3.11&#x2F;site-packages&#x2F;deepspeed&#x2F;runtime&#x2F;checkpoint_engine&#x2F;torch_checkpoint_engine.py中，调用<strong>torch.save</strong>(<strong>state_dict, path</strong>)函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">save</span>(<span class="hljs-params">self, state_dict, path: <span class="hljs-built_in">str</span></span>):<br>        logger.info(<span class="hljs-string">f&quot;[Torch] Saving <span class="hljs-subst">&#123;path&#125;</span>...&quot;</span>)<br>        torch.save(state_dict, path)<br>        logger.info(<span class="hljs-string">f&quot;[Torch] Saved <span class="hljs-subst">&#123;path&#125;</span>.&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br></code></pre></td></tr></table></figure><ul><li>Pytorch 保存和加载模型后缀：**.pt 和.pth**<br><strong>作用</strong>：保存一个<strong>序列化</strong>（serialized）的目标到磁盘。<br>函数使用了Python的<strong>pickle程序</strong>用于序列化。模型（models），张量<br>（tensors）和文件夹（dictionaries）都是可以用这个函数保存的目标类型</li></ul><p>在保存用于推理或者继续训练的常规检查点的时候，除了模型的state_dict之外，还必须保存其他参数。保存<strong>优化器</strong>的state_dict也非常重要，因为它包含了模型在训练时候优化器的缓存和参数。</p><h2 id="save-函数的参数列表"><a href="#save-函数的参数列表" class="headerlink" title="save 函数的参数列表"></a>save 函数的参数列表</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php">def <span class="hljs-title function_ invoke__">save</span>(<br>    <span class="hljs-attr">obj</span>: <span class="hljs-keyword">object</span>,<br>    <span class="hljs-attr">f</span>: FILE_LIKE,<br>    <span class="hljs-attr">pickle_module</span>: Any = pickle,<br>    <span class="hljs-attr">pickle_protocol</span>: <span class="hljs-keyword">int</span> = DEFAULT_PROTOCOL,<br>    <span class="hljs-attr">_use_new_zipfile_serialization</span>: <span class="hljs-keyword">bool</span> = True,<br>    <span class="hljs-attr">_disable_byteorder_record</span>: <span class="hljs-keyword">bool</span> = False<br>) -&gt; None:<br></code></pre></td></tr></table></figure><ul><li><strong>obj</strong>: object: 需要保存的对象（如张量、模型等）。</li><li><strong>f</strong>: FILE_LIKE: 目标文件，必须是一个文件类对象，能够实现 write 和 flush 方法，或者是一个包含文件路径的字符串或 os.PathLike 对象。</li><li><strong>pickle_module</strong>: Any &#x3D; pickle: 序列化时使用的模块，默认是 Python 的 pickle 模块，可以传入其他模块来控制序列化过程。</li><li><strong>pickle_protocol</strong>: int &#x3D; DEFAULT_PROTOCOL: 指定使用的 pickle 协议版本，默认使用 PyTorch 默认的协议。</li><li><strong>_use_new_zipfile_serialization</strong>: bool &#x3D; True: 是否使用新的基于 ZIP 的文件格式进行序列化。默认为 True，表示使用新格式。需要使用旧格式保存，可以将 _use_new_zipfile_serialization&#x3D;False</li><li><strong>_disable_byteorder_record</strong>: bool &#x3D; False:用于控制是否记录字节顺序。</li></ul><h2 id="核心逻辑-1"><a href="#核心逻辑-1" class="headerlink" title="核心逻辑"></a>核心逻辑</h2><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">torch._C._log_api_usage_once</span>(<span class="hljs-string">&quot;torch.save&quot;</span>)<br>    <span class="hljs-function"><span class="hljs-title">_check_dill_version</span>(<span class="hljs-variable">pickle_module</span>)</span><br>    <span class="hljs-function"><span class="hljs-title">_check_save_filelike</span>(<span class="hljs-variable">f</span>)</span><br><br></code></pre></td></tr></table></figure><ul><li><strong>torch._C._log_api_usage_once</strong>(“torch.save”)调用内部 C++ 函数 _log_api_usage_once 记录 torch.save 的 API 使用信息。PyTorch 内部会收集 API 调用的统计数据。</li><li>_<strong>check_dill_version</strong>(pickle_module)验证它的版本是否支持当前 PyTorch 的序列化需求。目的是避免由于模块版本问题导致序列化失败。</li><li>_<strong>check_save_filelike</strong>(f) 验证 f 是否是有效的文件类对象或路径。</li></ul><h3 id="检查是否使用新-ZIP-序列化格式"><a href="#检查是否使用新-ZIP-序列化格式" class="headerlink" title="检查是否使用新 ZIP 序列化格式"></a>检查是否使用新 ZIP 序列化格式</h3><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sqf"><br><span class="hljs-keyword">if</span> <span class="hljs-variable">_use_new_zipfile_serialization</span>:<br>    <span class="hljs-keyword">with</span> <span class="hljs-variable">_open_zipfile_writer</span>(f) as opened_zipfile:<br>        <span class="hljs-variable">_save</span>(obj, opened_zipfile, pickle_module, pickle_protocol, <span class="hljs-variable">_disable_byteorder_record</span>)<br>        return<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-keyword">with</span> <span class="hljs-variable">_open_file_like</span>(f, <span class="hljs-string">&#x27;wb&#x27;</span>) as opened_file:<br>        <span class="hljs-variable">_legacy_save</span>(obj, opened_file, pickle_module, pickle_protocol)<br></code></pre></td></tr></table></figure><ul><li>_<strong>open_zipfile_writer</strong>(f): 打开一个 ZIP 文件写入器。 f 是文件路径，则创建对应文件。</li><li>_<strong>save</strong>(obj, opened_zipfile, pickle_module, pickle_protocol, _disable_byteorder_record):实际保存逻辑。将对象 obj 序列化并写入到 ZIP 文件中，使用指定的 pickle_module 和 pickle_protocol。<br>_disable_byteorder_record: 控制是否记录字节顺序，通常与硬件架构有关（如小端序&#x2F;大端序）。默认false。</li></ul><h2 id="def-save实际保存逻辑分析"><a href="#def-save实际保存逻辑分析" class="headerlink" title="def _save实际保存逻辑分析"></a>def _save实际保存逻辑分析</h2><h3 id="初始化数据结构"><a href="#初始化数据结构" class="headerlink" title="初始化数据结构"></a>初始化数据结构</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_save</span>(<span class="hljs-params">obj, zip_file, pickle_module, pickle_protocol, _disable_byteorder_record</span>):<br>    serialized_storages = &#123;&#125;<br>    id_map: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">str</span>] = &#123;&#125;<br>    storage_dtypes: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">int</span>, torch.dtype] = &#123;&#125;<br></code></pre></td></tr></table></figure><ul><li><strong>serialized_storages</strong> &#x3D; {}存储所有被序列化的 PyTorch 存储对象（Storage）及其对应的键值对。</li><li><strong>id_map: Dict[int, str]</strong> &#x3D; {}维护<strong>存储对象</strong>的唯一标识映射。<br>键：存储对象的 _cdata 属性（内存地址）。<br>值：存储对象的唯一字符串标识符（str(len(id_map)) 自动生成）。<br>避免多次序列化同一个存储对象。</li><li><strong>storage_dtypes</strong>: Dict[int, torch.dtype] &#x3D; {}记录存储对象的 data_ptr（内存指针）和其数据类型。保证同一内存地址的数据类型一致。</li></ul><p>这部分代码的目的是初始化保存过程中需要追踪的信息结构：</p><ol><li>serialized_storages：记录被序列化的存储对象，便于后续写入 ZIP 文件</li><li>id_map：确保存储对象的唯一标识，用于多次引用时避免重复保存。</li><li>storage_dtypes：确保数据类型一致性，防止跨张量操作引发错误。</li></ol><h3 id="生成存储对象的唯一标识符和元信息流程"><a href="#生成存储对象的唯一标识符和元信息流程" class="headerlink" title="生成存储对象的唯一标识符和元信息流程"></a>生成存储对象的唯一标识符和元信息流程</h3><ul><li>判断对象是否为 PyTorch 存储类型（TypedStorage 或旧版 Storage）。</li><li>为特定对象生成持久化 ID，在序列化过程中标记特殊类型的数据对象。<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">def</span> persistent_id(obj):<br>        <span class="hljs-keyword">if</span> isinstance(obj, torch.storage.<span class="hljs-type">TypedStorage</span>) or torch.is_storage(obj):<br><br>            <span class="hljs-keyword">if</span> isinstance(obj, torch.storage.<span class="hljs-type">TypedStorage</span>):<br>                # <span class="hljs-type">TODO</span>: <span class="hljs-type">Once</span> we decide to break serialization <span class="hljs-type">FC</span>, this <span class="hljs-keyword">case</span><br>                # can be deleted<br>                storage = obj._untyped_storage<br>                storage_d<span class="hljs-keyword">type</span> = obj.dtype<br>                storage_type_str = obj._pickle_storage_type()<br>                storage_<span class="hljs-keyword">type</span> = getattr(torch, storage_type_str)<br>                storage_numel = obj._size()<br><br>            <span class="hljs-keyword">else</span>:<br>                storage = obj<br>                storage_d<span class="hljs-keyword">type</span> = torch.uint8<br>                storage_<span class="hljs-keyword">type</span> = normalize_storage_type(type(obj))<br>                storage_numel = storage.nbytes()<br>                 <br></code></pre></td></tr></table></figure></li><li>处理 TypedStorage 类型（具备类型信息的存储）：</li></ul><ol><li>storage &#x3D; obj._untyped_storage 获取 TypedStorage 的底层非类型化存储（UntypedStorage），TypedStorage 是 Storage 的高级抽象，增加了数据类型信息。</li><li>storage_dtype &#x3D; obj.dtype提取存储对象的数据类型（如 torch.float16）。</li><li>storage_type_str &#x3D; obj._pickle_storage_type() 获取存储对象的类型名称（如 FloatStorage）。通过 getattr 获取对应的类型对象。</li><li>storage_numel &#x3D; obj._size()获取存储对象的元素数量（numel）。</li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-keyword">if</span> storage<span class="hljs-selector-class">.data_ptr</span>() != <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">if</span> storage<span class="hljs-selector-class">.data_ptr</span>() <span class="hljs-keyword">in</span> storage_dtypes:<br>                    <span class="hljs-keyword">if</span> storage_dtype != storage_dtypes<span class="hljs-selector-attr">[storage.data_ptr()]</span>:<br>                        raise <span class="hljs-built_in">RuntimeError</span>(<br>                            <span class="hljs-string">&#x27;Cannot save multiple tensors or storages that &#x27;</span><br>                            <span class="hljs-string">&#x27;view the same data as different types&#x27;</span>)<br>                <span class="hljs-keyword">else</span>:<br>                    storage_dtypes<span class="hljs-selector-attr">[storage.data_ptr()]</span> = storage_dtype<br><br>            storage_key = id_map<span class="hljs-selector-class">.setdefault</span>(storage._cdata, <span class="hljs-built_in">str</span>(<span class="hljs-built_in">len</span>(id_map)))<br>            location = <span class="hljs-built_in">location_tag</span>(storage)<br>            serialized_storages<span class="hljs-selector-attr">[storage_key]</span> = storage<br><br>            return (<span class="hljs-string">&#x27;storage&#x27;</span>,<br>                    storage_type,<br>                    storage_key,<br>                    location,<br>                    storage_numel)<br><br>        return None<br></code></pre></td></tr></table></figure><ul><li>if storage.data_ptr() !&#x3D; 0:检查存储对象的指针（data_ptr）是否非零。data_ptr() 返回存储的底层内存地址。</li><li>storage.data_ptr() in storage_dtypes：检查当前存储对象的内存地址是否已存在于 storage_dtypes 中。如果该存储的内存地址尚未记录，存储其对应的数据类型。</li><li>storage_key &#x3D; id_map.setdefault(storage._cdata, str(len(id_map)))为存储对象分配唯一的键（storage_key）。</li><li>location &#x3D; location_tag(storage)获取存储的设备位置信息（如 cpu 或 cuda:0）。</li><li>serialized_storages[storage_key] &#x3D; storage将存储对象按其键（storage_key）保存到 serialized_storages 字典中。</li><li>生成并返回该存储对象的持久化 ID（元组）。</li><li>如果对象 obj 不是存储对象，则返回 None，表示无需特殊处理。</li></ul><p><strong>总结：</strong></p><ul><li>首先判断对象类型（<strong>TypedStorage 和普通 Storage</strong>），提取存储元信息：数据类型、存储类型、大小等元信息。</li><li>然后检查存储是否已分配内存<strong>storage.data_ptr() !&#x3D; 0</strong>，未分配无需进行类型检查。否则检查存储的 data_ptr() 是否已经存在于 storage_dtypes，if <strong>storage_dtype !&#x3D; storage_dtypes[storage.data_ptr()]<strong>，如果当前存储的 dtype 与之前记录的不一致，抛出一个运行时错误。这确保了同一块内存地址上的存储不能在序列化过程中以不同的数据类型保存。如果该 data_ptr() 尚未记录，将当前存储的 dtype 添加到 storage_dtypes 字典中，方便后续检查。</strong>storage_dtypes[storage.data_ptr()] &#x3D; storage_dtype</strong>。<strong>确保引用相同内存地址的多个存储对象在序列化过程中具有一致的数据类型。</strong></li><li>为当前存储生成或获取一个唯一的 <strong>storage_keystorage_key &#x3D; id_map.setdefault(storage._cdata, str(len(id_map)))</strong></li><li>最后返回持久化标识符，用于后续保存和加载过程中的关联</li></ul><h3 id="对象序列化为二进制数据"><a href="#对象序列化为二进制数据" class="headerlink" title="对象序列化为二进制数据"></a>对象序列化为二进制数据</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Write the pickle data for `obj`</span><br>   data_buf = io.BytesIO()<br>   pickler = pickle_module.Pickler(data_buf, protocol=pickle_protocol)<br>   pickler.persistent_id = persistent_id<br>   pickler.dump(obj)<br>   data_value = data_buf.getvalue()<br>   zip_file.write_record(<span class="hljs-string">&#x27;data.pkl&#x27;</span>, data_value, <span class="hljs-built_in">len</span>(data_value))<br><br>   <span class="hljs-comment"># Write byte order marker</span><br>   <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> _disable_byteorder_record:<br>       <span class="hljs-keyword">if</span> sys.byteorder <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;little&#x27;</span>, <span class="hljs-string">&#x27;big&#x27;</span>]:<br>           <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&#x27;Unknown endianness type: &#x27;</span> + sys.byteorder)<br><br>       zip_file.write_record(<span class="hljs-string">&#x27;byteorder&#x27;</span>, sys.byteorder, <span class="hljs-built_in">len</span>(sys.byteorder))<br></code></pre></td></tr></table></figure><ul><li><strong>data_buf &#x3D; io.BytesIO</strong>() 创建一个内存中的二进制数据缓冲区（BytesIO 对象），存在于内存中，用于存储后续序列化生成的数据。</li><li>创建一个 <strong>Pickler</strong> 对象，用于将 obj 序列化为二进制数据。<strong>pickle_protocol</strong>: 序列化使用的协议版本。</li><li><strong>pickler.persistent_id &#x3D; persistent_id</strong>将 persistent_id 函数分配给 pickler 对象，用于处理序列化中的持久性对象。</li><li><strong>pickler.dump</strong>(obj)使用 Pickler 对象将 obj 序列化为二进制数据，并写入 data_buf 中。<strong>dump</strong> 方法是 Pickler 提供的序列化操作。</li><li><strong>data_value &#x3D; data_buf.getvalue</strong>()从 data_buf 中提取已经序列化的二进制数据，存储到变量 <strong>data_value</strong> 中。</li><li><strong>zip_file.write_record</strong>(‘<strong>data.pkl’, data_value, len(data_value</strong>))将序列化的二进制数据 data_value 写入到 zip_file 中，文件名为 ‘data.pkl’。</li><li>检查是否需要禁用字节序标记写入功能，<strong>sys.byteorder</strong>: 系统的字节序，可以是 ‘little’（小端序）或 ‘big’（大端序）。如果检测到未知字节序，则抛出异常。</li><li><strong>zip_file.write_record(‘byteorder’, sys.byteorder, len(sys.byteorder</strong>))将系统的字节序（sys.byteorder）作为记录写入 zip_file，文件名为 ‘byteorder’。数据内容是 ‘little’ 或 ‘big’。</li></ul><h3 id="张量存储器的保存"><a href="#张量存储器的保存" class="headerlink" title="张量存储器的保存"></a>张量存储器的保存</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"># <span class="hljs-keyword">Write</span> <span class="hljs-keyword">each</span> tensor <span class="hljs-keyword">to</span> a file named tensor/the_tensor_key <span class="hljs-keyword">in</span> the zip archive<br>   <span class="hljs-keyword">for key</span> <span class="hljs-keyword">in</span> sorted(serialized_storages.keys()):<br>       <span class="hljs-type">name</span> = f<span class="hljs-string">&#x27;data/&#123;key&#125;&#x27;</span><br>       storage = serialized_storages[key]<br>       # given that we <span class="hljs-keyword">copy</span> things around anyway, we might use <span class="hljs-keyword">storage</span>.cpu()<br>       # this means <span class="hljs-keyword">to</span> that <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> tensors serialized, you need <span class="hljs-keyword">to</span> implement<br>       # .cpu() <span class="hljs-keyword">on</span> the underlying <span class="hljs-keyword">Storage</span><br>       <span class="hljs-keyword">if</span> <span class="hljs-keyword">storage</span>.device.<span class="hljs-keyword">type</span> != <span class="hljs-string">&#x27;cpu&#x27;</span>:<br>           storage = <span class="hljs-keyword">storage</span>.cpu()<br>       # Now that it <span class="hljs-keyword">is</span> <span class="hljs-keyword">on</span> the CPU we can directly <span class="hljs-keyword">copy</span> it <span class="hljs-keyword">into</span> the zip file<br>       num_bytes = <span class="hljs-keyword">storage</span>.nbytes()<br>       zip_file.write_record(<span class="hljs-type">name</span>, <span class="hljs-keyword">storage</span>, num_bytes)<br></code></pre></td></tr></table></figure><ul><li>遍历 <strong>serialized_storages</strong> 的所有键，并按字母顺序排序，serialized_storages: 一个字典，其中键是张量的名称或标识符，值是对应的存储对象（通常为张量的底层数据）。</li><li>**name &#x3D; f’data&#x2F;{key}’**，生成该键对应的文件路径，存储为变量 name，文件路径以 ‘data&#x2F;‘ 为前缀，再加上键值 key。</li><li><strong>storage &#x3D; serialized_storages[key]</strong> serialized_storages 字典中获取当前键 key 对应的存储对象，赋值给变量 storage。</li><li><strong>if storage.device.type !&#x3D; ‘cpu’</strong>:检查当前存储对象是否位于非 CPU 设备上（如 GPU）。 <strong>storage &#x3D; storage.cpu</strong>()如果设备类型不是 ‘cpu’，则将存储对象移至 CPU。</li><li><strong>num_bytes &#x3D; storage.nbytes</strong>()获取当前存储对象占用的字节数，赋值给变量 num_bytes。</li><li>**zip_file.write_record(name, storage, num_bytes)**将存储对象 <strong>storage</strong> 写入压缩文件中，文件名为 name。<br><strong>name</strong>: 文件路径（如 ‘data&#x2F;weight’）。<br><strong>storage</strong>: 需要写入的数据内容。<br><strong>num_bytes</strong>: 数据的字节大小，用于告知写入函数内假设是一个自定义方法，负责将数据写入到压缩文件中。</li></ul><h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h3><ol><li><strong>对象序列化（Pickle）并存储</strong>：使用 pickle 序列化模块将指定的对象 obj 转换为二进制数据。序列化后的数据被存储在内存缓冲区中，并写入压缩文件 zip_file，文件名为 ‘data.pkl’。</li><li><strong>记录字节序（Byte Order Marker</strong>）：检查系统的字节序（sys.byteorder），确保它是有效的（’little’ 或 ‘big’）。将字节序信息写入压缩文件中，文件名为 ‘byteorder’。</li><li><strong>张量数据的存储</strong>：遍历所有张量存储（serialized_storages 字典中的键值对）。为每个张量生成文件路径，存储为 ‘data&#x2F;<tensor_key>‘。<br>如果张量数据不在 CPU 上（如位于 GPU 上），将其移动到 CPU，确保数据可以被序列化并存储。获取张量数据的字节大小，并将其内容写入压缩文件中。</li></ol><h2 id="def-save函数核心逻辑"><a href="#def-save函数核心逻辑" class="headerlink" title="def_save函数核心逻辑"></a>def_save函数核心逻辑</h2><p>这段代码提供了一个通用的机制，用于将复杂对象和张量序列化并存储在压缩文件中</p><ol><li><strong>初始化数据结构</strong>：</li></ol><ul><li>定义 serialized_storages 用于存储序列化后的张量存储器。</li><li>使用 id_map 记录每个存储器的唯一标识符，避免重复序列化相同数据。</li><li>通过 storage_dtypes 确保多个存储器（storages）共享同一底层数据时，它们的数据类型（dtype）一致</li></ul><ol start="2"><li><strong>生成存储对象的唯一标识符和元信息</strong>：</li></ol><ul><li>该方法处理张量的存储器序列化逻辑，并返回一个包含存储器元数据的标识符（tuple）。</li><li>记录存储器的类型、唯一键、位置（设备）、元素数量等信息。</li><li>检查共享数据指针的存储器是否具有相同的数据类型，确保数据一致性。<br>将存储器添加到 serialized_storages 中，并通过 id_map 分配唯一键名。</li></ul><ol start="3"><li><strong>对象序列化和保存：</strong></li></ol><ul><li>使用 pickle 模块将对象（obj）序列化为二进制数据。</li><li>通过 pickle_module.Pickler 实现自定义序列化行为，并将persistent_id 用于处理张量存储器的特殊序列化需求。</li><li>将序列化后的对象数据写入压缩文件，文件名为 data.pkl。<br>4.<strong>存储字节序（Byte Order Marker）：</strong></li><li>检查系统的字节序（sys.byteorder），确保数据可以跨平台读取。将字节序信息写入压缩文件，文件名为 byteorder。</li></ul><ol start="5"><li><strong>张量存储器的保存：</strong></li></ol><ul><li>遍历 serialized_storages 中的所有张量存储器。如果存储器不在 CPU 上，则将其移动到 CPU。</li><li>获取存储器的字节大小并将其内容写入压缩文件，路径为 data&#x2F;<storage_key>。</li></ul>]]></content>
    
    
    <categories>
      
      <category>Llama_factory</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
